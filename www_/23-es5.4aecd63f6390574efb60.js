!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"Z+oU":function(n,o,r){"use strict";r.r(o),r.d(o,"ScanJobPageModule",(function(){return k}));var i=r("ofXK"),a=r("3Pt+"),c=r("tyNb"),s=r("c7TG"),l=r("mrSG"),u=r("WdVq"),d=r("SmVF"),m=r("HSMY"),h=r("fXoL"),f=r("e8h1");function p(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-item"),h["\u0275\u0275elementStart"](1,"ion-row"),h["\u0275\u0275elementStart"](2,"ion-col",3),h["\u0275\u0275elementStart"](3,"ion-label"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate1"](" ",n," ")}}function b(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-item"),h["\u0275\u0275elementStart"](1,"ion-row"),h["\u0275\u0275elementStart"](2,"ion-col",3),h["\u0275\u0275elementStart"](3,"ion-label"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate1"](" ",n.key," ")}}var g,v,S=[{path:"",component:(g=function(){function n(t,o,r,i,a,c,s,l){e(this,n),this.api=t,this.barcodeScanner=o,this.toast=r,this.storage=i,this.router=a,this.route=c,this.loadingController=s,this.toastController=l,this.barcodePush=[],this.connote_new=[],this.count_connote=0}var o,r,i;return o=n,(r=[{key:"ngOnInit",value:function(){this.getSend()}},{key:"getSend",value:function(){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({});case 2:return t=e.sent,this.sends=[],e.next=6,t.present();case 6:this.storage.get("emp_key").then((function(e){n.api.getSend(e).subscribe((function(e){console.log(e),"success"==e.result&&(n.sends=e.data),t.dismiss()}),(function(e){console.log(e),t.dismiss()}))}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"rmBarcode",value:function(e){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({});case 2:return n=t.sent,t.next=5,n.present();case 5:this.api.deleteJob(e).subscribe((function(t){if(console.log(t),"success"==t.result){o.count_connote=Number(o.count_connote)-1,o.count_connote<0&&(o.count_connote=0);var r=o.barcodePush.indexOf(e);-1!==r&&o.barcodePush.splice(r,1),n.dismiss(),o.alert(t.result+" "+t.desc)}else o.alert(t.result+" "+t.desc)}),(function(e){o.alert(e),console.log(e),n.dismiss()}));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"scan",value:function(){var e=this;this.options={prompt:"\u0e1e\u0e22\u0e32\u0e22\u0e32\u0e21\u0e27\u0e32\u0e07\u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e49\u0e14\u0e44\u0e27\u0e49\u0e15\u0e23\u0e07\u0e01\u0e25\u0e32\u0e07\u0e08\u0e2d",disableSuccessBeep:!1,resultDisplayDuration:500,saveHistory:!0,showTorchButton:!0,showFlipCameraButton:!0},this.barcodeScanner.scan(this.options).then((function(t){if(e.barcode=t.text,t.cancelled)return console.log("User cancelled the action!"),!1;e.check_loop=0,""!=e.barcode&&(e.barcodePush.forEach((function(t){t==e.barcode&&(e.check_loop=1)})),0==e.check_loop?(e.sendData(e.barcode),e.toast.show(t.text,"200","center").subscribe((function(e){console.log(e)}))):e.alert(e.barcode+" Dupplicate."))}),(function(t){e.toast.show(t,"5000","center").subscribe((function(e){console.log(e)}))}))}},{key:"submitForm",value:function(){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!=this.barcode&&(this.sendData(this.barcode),this.storage.set("keyOfDataJob",JSON.stringify(this.barcodePush))),this.storage.get("keyOfDataJob").then((function(e){""!=e&&(t.connote_new=JSON.parse(e))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"sendData",value:function(e){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,r,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=!1,o=0;o<=this.barcodePush.length-1;o++)this.barcodePush[o]==this.barcode&&(n=!0);if(!n){t.next=5;break}t.next=11;break;case 5:return t.next=7,this.loadingController.create({});case 7:return r=t.sent,t.next=10,r.present();case 10:this.storage.get("emp_key").then((function(t){i.emp_key=t,i.api.createJob(e,i.emp_key).subscribe((function(e){"success"==e.result?(i.connote_new.push(i.barcode),i.count_connote=Number(i.count_connote)+1,i.alert(e.result+" "+e.desc+" "+i.barcode),i.barcodePush.push(i.barcode),r.dismiss()):(i.alert(e.result+" "+e.desc),r.dismiss())}),(function(e){i.alert(e),console.log(e),r.dismiss()}))}));case 11:case"end":return t.stop()}}),t,this)})))}},{key:"removeBarcode",value:function(){}},{key:"alert",value:function(e){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:"Add connote "+e,duration:2e3});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}}])&&t(o.prototype,r),i&&t(o,i),n}(),g.\u0275fac=function(e){return new(e||g)(h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](f.b),h["\u0275\u0275directiveInject"](c.f),h["\u0275\u0275directiveInject"](c.a),h["\u0275\u0275directiveInject"](s.E),h["\u0275\u0275directiveInject"](s.K))},g.\u0275cmp=h["\u0275\u0275defineComponent"]({type:g,selectors:[["app-scan"]],decls:28,vars:5,consts:[[1,"header"],["slot","start"],["color","warning","expand","full","routerLink","/members/dashboard/send"],["size","12"],[4,"ngFor","ngForOf"],[3,"ngSubmit"],["form","ngForm"],["name","barcode","type","text","placeholder","\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e25\u0e02\u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e49\u0e14","required","",3,"ngModel","ngModelChange"],["size","6"],["expand","full","type","submit","color","primary",3,"disabled"],["color","dark","expand","full",3,"click"]],template:function(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-header"),h["\u0275\u0275elementStart"](1,"ion-toolbar",0),h["\u0275\u0275elementStart"](2,"ion-buttons",1),h["\u0275\u0275elementStart"](3,"ion-button",2),h["\u0275\u0275text"](4,"< \u0e01\u0e25\u0e31\u0e1a"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"ion-title"),h["\u0275\u0275text"](6,"\u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e14 Connote \u0e2a\u0e48\u0e07\u0e02\u0e2d\u0e07"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"ion-content"),h["\u0275\u0275elementStart"](8,"ion-item"),h["\u0275\u0275elementStart"](9,"ion-row"),h["\u0275\u0275elementStart"](10,"ion-col",3),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](12,p,5,1,"ion-item",4),h["\u0275\u0275template"](13,b,5,1,"ion-item",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"form",5,6),h["\u0275\u0275listener"]("ngSubmit",(function(){return t.submitForm()})),h["\u0275\u0275elementStart"](16,"ion-grid"),h["\u0275\u0275elementStart"](17,"ion-row"),h["\u0275\u0275elementStart"](18,"ion-col",3),h["\u0275\u0275elementStart"](19,"ion-item"),h["\u0275\u0275elementStart"](20,"ion-input",7),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.barcode=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"ion-row"),h["\u0275\u0275elementStart"](22,"ion-col",8),h["\u0275\u0275elementStart"](23,"ion-button",9),h["\u0275\u0275text"](24,"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19 \u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e49\u0e14"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"ion-col",8),h["\u0275\u0275elementStart"](26,"ion-button",10),h["\u0275\u0275listener"]("click",(function(){return t.scan()})),h["\u0275\u0275text"](27,"\u0e41\u0e2a\u0e01\u0e19 connote"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275reference"](15);h["\u0275\u0275advance"](11),h["\u0275\u0275textInterpolate1"](" \u0e08\u0e33\u0e19\u0e27\u0e19 Connote \u0e17\u0e35\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21 ",t.count_connote," "),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.barcodePush),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.sends),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngModel",t.barcode),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("disabled",n.invalid)}},directives:[s.n,s.B,s.g,s.f,s.I,c.g,s.A,s.k,s.q,s.w,s.j,i.i,a.j,a.e,a.f,s.m,s.p,s.J,a.i,a.d,a.g,s.r],styles:[".header[_ngcontent-%COMP%]{padding:20px 0;--background:#3f51b5}.header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff}"]}),g)}],k=((v=function t(){e(this,t)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:v}),v.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||v)},imports:[[i.b,a.b,s.C,c.h.forChild(S)]]}),v)}}])}();