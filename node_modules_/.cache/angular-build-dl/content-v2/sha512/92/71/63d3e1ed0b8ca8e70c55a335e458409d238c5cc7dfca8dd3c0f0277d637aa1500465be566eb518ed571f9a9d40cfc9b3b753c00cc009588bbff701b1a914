{"version":3,"sources":["webpack:///src/app/members/dashboard/job-confirm/job-confirm.page.scss","webpack:///src/app/members/dashboard/job-confirm/job-confirm.module.ts","webpack:///src/app/members/dashboard/job-confirm/job-confirm.page.ts","webpack:///src/app/members/dashboard/job-confirm/job-confirm.page.html"],"names":["routes","path","component","JobConfirmPageModule","imports","forChild","declarations","JobConfirmPage","navController","storage","toastCtrl","api","loadingController","camera","route","http","router","signature","isDrawing","signaturePadOptions","signaturePad","clear","get","then","data","toDataURL","set","base64Image","create","loading","connote_new_string_url","val","objVal","present","formData","FormData","replace","append","comment","snapshot","paramMap","confirmJob","subscribe","res","sendDetail","dismiss","console","log","result","navigate","err","getPicture","targetWidth","targetHeight","correctOrientation","sourceType","PictureSourceType","CAMERA","destinationType","DestinationType","DATA_URL","imageData","picture","SAVEDPHOTOALBUM","read","selector","template"],"mappings":"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","file":"dashboard-job-confirm-job-confirm-module-es5.js","sourcesContent":["export default \".drawing-active {\\n  background: #d6fffc;\\n}\\n\\n.title {\\n  text-align: center;\\n  font-weight: bold;\\n  padding: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVtYmVycy9kYXNoYm9hcmQvam9iLWNvbmZpcm0vam9iLWNvbmZpcm0ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0MsbUJBQUE7QUFDRDs7QUFDQTtFQUNDLGtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxhQUFBO0FBRUQiLCJmaWxlIjoic3JjL2FwcC9tZW1iZXJzL2Rhc2hib2FyZC9qb2ItY29uZmlybS9qb2ItY29uZmlybS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZHJhd2luZy1hY3RpdmUge1xuXHRiYWNrZ3JvdW5kOiAjZDZmZmZjO1xufVxuLnRpdGxlIHtcblx0dGV4dC1hbGlnbjogY2VudGVyO1xuXHRmb250LXdlaWdodDogYm9sZDtcblx0cGFkZGluZzogMTBweDtcbn0iXX0= */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { JobConfirmPage } from './job-confirm.page';\n\nimport { SignaturePadModule } from 'angular2-signaturepad';\n\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: JobConfirmPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    SignaturePadModule\n  ],\n  declarations: [JobConfirmPage]\n})\nexport class JobConfirmPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ViewChild } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { SignaturePad } from 'angular2-signaturepad/signature-pad';\nimport { Storage } from '@ionic/storage';\nimport { ToastController } from '@ionic/angular';\nimport { Camera } from '@ionic-native/Camera/ngx';\nimport { RestApiService } from '../../../rest-api.service';\nimport { LoadingController } from '@ionic/angular';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\n\n\n@Component({\n  selector: 'app-job-confirm',\n  templateUrl: './job-confirm.page.html',\n  styleUrls: ['./job-confirm.page.scss'],\n})\nexport class JobConfirmPage implements OnInit {\n\tsignature = '';\n  \tisDrawing = false;\n  \tsendDetail: any;\n  \tconnote_new: any;\n  \tconnote_new_string_url: any;\n  \tobjVal: any;\n    comment: any;\n  \t@ViewChild(SignaturePad,{ read: false, static: false }) signaturePad: SignaturePad;\n\tpublic signaturePadOptions: Object = { \n\t    'minWidth': 2,\n\t    'canvasWidth': 400,\n\t    'canvasHeight': 200,\n\t    'backgroundColor': '#f6fbff',\n\t    'penColor': '#666a73'\n\t};\n\tbase64Image: any;\n\tpicture: any;\n  \tconstructor(public navController: NavController, \n  \t\tpublic storage: Storage, public toastCtrl: ToastController, \n  \t\tpublic api: RestApiService, \n    \tpublic loadingController: LoadingController,\n  \t\tpublic camera: Camera,\n  \t\tpublic route: ActivatedRoute,\n  \t\tpublic http: HttpClient,\n      public router: Router) { }\n\n  \tngOnInit() {\n  \t}\n\n  \tionViewDidEnter() {\n    this.signaturePad.clear()\n    \t\n    \tthis.storage.get('savedSignature').then((data) => {\n      \tthis.signature = data;\n    });\n  }\n \n  drawComplete() {\n    this.isDrawing = false;\n  }\n \n  drawStart() {\n    this.isDrawing = true;\n  }\n \n  async savePad() {\n    this.signature = this.signaturePad.toDataURL('png',80);\n    this.storage.set('savedSignature', this.signature);\n    this.base64Image;\n\n    const loading = await this.loadingController.create({\n    // content: 'Loading'\n    });\n    this.connote_new_string_url = '';\n    this.storage.get('keyOfData').then((val) => {\n    \t// console.log('val = '+JSON.parse(val));\n    \tthis.objVal = val;\n\n    \t// console.log(this.objVal);\n    \t// for (let entry in this.objVal){\n    \t// \t// this.\n    \t// \t// console.log(this.objVal[entry]['barcode']);\n    \t// \tif(this.objVal[entry]['barcode']!=''){\n\t    // \t\tthis.connote_new_string_url += ','+this.objVal[entry]['barcode'];\n\t    // \t}\n    \t// }\n    \t// console.log(this.connote_new_string_url);\n    \t// console.log(this.connote_new_string_url);\n      // console.log(JSON.parse(val));\n      // this.textPrint = JSON.parse(val);\n    });\n    await loading.present();\n    // var headers = new Headers();\n     // headers.append(\"Accept\", 'application/json');\n     // headers.append('Content-Type', 'application/x-www-form-urlencoded' );\n     // console.log(this.route.snapshot.paramMap.get('id'));\n    const formData = new FormData();\n    // console.log(this.signature);\n    if(this.signature){\n      this.signature = this.signature.replace(/data/gi , \"\"); \n    }\n    \n    if(this.base64Image){\n      this.base64Image = this.base64Image.replace(/data/gi , \"\"); \n    }\n    formData.append('signature' ,this.signature);\n    formData.append('barcode',this.objVal);\n    formData.append('comment',this.comment);\n    formData.append('image',this.base64Image);\n    formData.append('booking_id',this.route.snapshot.paramMap.get('id'));\n\n    // console.log('comment'+this.comment);\n    // console.log('form-data:');\n    // console.log(formData);\n\n    // let postData =  {\n    //   signature: this.signature,\n    //   barcode: this.objVal,\n    //   comment: this.comment,\n    //   image: this.base64Image,\n    //   booking_id: this.route.snapshot.paramMap.get('id')\n    // }\n\n    await this.api.confirmJob(formData,this.route.snapshot.paramMap.get('id'),this.objVal,this.comment).subscribe(res => {\n        // console.log('>');\n        // console.log(res.result);\n        // console.log('<');\n        // console.log(this.comment);\n        this.sendDetail = res;\n        this.storage.set('keyOfData', '');\n        loading.dismiss();\n        console.log(res);\n        if(res.result==\"success\"){\n          this.router.navigate(['members/dashboard/job']);\n        }\n        // console.log(this.sendDetail);\n\n    }, err => {\n      console.log(err);\n      loading.dismiss();\n    });\n   //  let postData =  {\n   //      signature: this.signature,\n  \t// \tfile: this.base64Image,\n  \t// \tid_book:this.route.snapshot.paramMap.get('id'),\n  \t// \tconnote_new:this.connote_new_string_url\n  \t// }\n\n   //    this.http.post('http://af1express.com/api/ajax/post_job.php', postData,{observe: 'response'})\n   //     .subscribe(data => {\n   //     \tconsole.log(data);\n   //      }, error => {\n   //       // return error;\n   //     });\n    // await this.api.confirmJob(this.route.snapshot.paramMap.get('id'),this.signature,this.base64Image,this.connote_new_string_url).subscribe(res => {\n    //   // console.log(res);\n    //   this.sendDetail = res;\n    //   // console.log(this.loginDetail);\n    //   loading.dismiss();\n    //   console.log(this.sendDetail);\n    //   if(this.sendDetail.result=='success'){\n        \n    //   }\n    // }, err => {\n    //   console.log(err);\n    //   loading.dismiss();\n    // });\n    // console.log(this.signature);\n    // this.signaturePad.clear();\n    // let toast = this.toastCtrl.create({\n    //   message: 'New Signature saved.',\n    //   duration: 3000\n    // });\n    // toast.present();\n  }\n \n  \tclearPad() {\n    \tthis.signaturePad.clear();\n  \t}\n  \tAccessCamera(){\n\n\t this.camera.getPicture({\n\n\t targetWidth:512,\n\n\t targetHeight:512,\n\n\t correctOrientation:true,\n\n\t sourceType: this.camera.PictureSourceType.CAMERA,\n\n\t destinationType: this.camera.DestinationType.DATA_URL\n\n\t   }).then((imageData) => {\n\n\t     this.base64Image = 'data:image/jpeg;base64,'+imageData;\n\n\t     this.picture = imageData;\n\n\t         }, (err) => {\n\n\t     console.log(err);\n\n\t   });\n\n\t}\n\n\tAccessGallery(){\n\n\t this.camera.getPicture({\n\n\t    sourceType: this.camera.PictureSourceType.SAVEDPHOTOALBUM,\n\n\t    destinationType: this.camera.DestinationType.DATA_URL\n\n\t   }).then((imageData) => {\n\n\t     this.base64Image = 'data:image/jpeg;base64,'+imageData;\n\n\t     this.picture = imageData;\n\n\t        }, (err) => {\n\n\t     console.log(err);\n\n\t   });\n\n\t}\n\tUpload(){\n\t  \t// var headers = new Headers();\n\t  \t// headers.append(\"Accept\", \"application/json\");\n\t  \t// headers.append(\"Content-Type\", \"application/json\" );\n\n\t  // let options = new RequestOptions({ headers: headers });\n\n\t    // let data = {\n\n\t    \n\n\t    // };\n\n\t  // let loader = this.loading.create({\n\n\t  // content: \"Processing please wait…\",\n\n\t// });\n\t}\n}\n","export default \"<ion-header>\\n  <ion-toolbar class=\\\"header\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>รับสินค้า</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding no-bounce>\\n  <div class=\\\"title\\\">ลายเซนต์</div>\\n  <ion-row [ngClass]=\\\"{'drawing-active': isDrawing}\\\">\\n    <ion-col></ion-col>\\n    <ion-col>\\n      <signature-pad [options]=\\\"signaturePadOptions\\\" (onBeginEvent)=\\\"drawStart()\\\" (onEndEvent)=\\\"drawComplete()\\\"></signature-pad>\\n    </ion-col>\\n    <ion-col></ion-col>\\n  </ion-row>\\n  <ion-row>\\n    <ion-col>\\n      <ion-button color=\\\"primary\\\" (click)=\\\"AccessCamera()\\\"><ion-icon name=\\\"camera\\\"> Camera</ion-icon></ion-button>\\n      <ion-button color=\\\"primary\\\" (click)=\\\"AccessGallery()\\\"><ion-icon name=\\\"image\\\"> Gallery</ion-icon></ion-button>\\n    </ion-col>\\n  </ion-row>\\n  <ion-row>\\n    <ion-col>\\n      <img [src]=\\\"base64Image\\\" *ngIf=\\\"base64Image\\\" />\\n    </ion-col>\\n  </ion-row>\\n   <ion-row>\\n    <ion-col size=\\\"12\\\">\\n      <ion-item>\\n        <ion-input [(ngModel)]=\\\"comment\\\" name=\\\"comment\\\" type=\\\"text\\\" placeholder=\\\"หมายเหตุ ชื่อผู้เซนต์รับของ\\\" ></ion-input>\\n      </ion-item>\\n    </ion-col>\\n  </ion-row>\\n  \\n<ion-footer>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <ion-button color=\\\"danger\\\" (click)=\\\"clearPad()\\\">Clear</ion-button>\\n        <ion-button color=\\\"primary\\\" (click)=\\\"savePad()\\\">Save</ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-footer>\";"]}