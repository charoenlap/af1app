{"version":3,"sources":["webpack:///src/app/members/dashboard/send-confirm/send-confirm.page.scss","webpack:///src/app/members/dashboard/send-confirm/send-confirm.module.ts","webpack:///src/app/members/dashboard/send-confirm/send-confirm.page.html","webpack:///src/app/members/dashboard/send-confirm/send-confirm.page.ts"],"names":["routes","path","component","SendConfirmPageModule","imports","forChild","declarations","SendConfirmPage","navController","storage","toastCtrl","api","loadingController","camera","route","http","router","signature","isDrawing","signaturePadOptions","signaturePad","clear","get","then","data","toDataURL","set","base64Image","create","loading","connote_new_string_url","val","objVal","present","replace","formData","FormData","append","comment","snapshot","paramMap","confirmSend","subscribe","res","sendDetail","dismiss","console","log","result","navigate","err","getPicture","targetWidth","targetHeight","correctOrientation","sourceType","PictureSourceType","CAMERA","destinationType","DestinationType","DATA_URL","imageData","picture","SAVEDPHOTOALBUM","read","selector","template"],"mappings":"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","file":"dashboard-send-confirm-send-confirm-module-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21lbWJlcnMvZGFzaGJvYXJkL3NlbmQtY29uZmlybS9zZW5kLWNvbmZpcm0ucGFnZS5zY3NzIn0= */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SendConfirmPage } from './send-confirm.page';\n\nimport { SignaturePadModule } from 'angular2-signaturepad';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SendConfirmPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    SignaturePadModule\n  ],\n  declarations: [SendConfirmPage]\n})\nexport class SendConfirmPageModule {}\n","export default \"<ion-header>\\n  <ion-toolbar class=\\\"header\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>ยืนยันส่งสินค้า</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding no-bounce>\\n  <div class=\\\"title\\\">ลายเซนต์</div>\\n  <ion-row [ngClass]=\\\"{'drawing-active': isDrawing}\\\">\\n    <ion-col></ion-col>\\n    <ion-col>\\n      <signature-pad [options]=\\\"signaturePadOptions\\\" (onBeginEvent)=\\\"drawStart()\\\" (onEndEvent)=\\\"drawComplete()\\\"></signature-pad>\\n    </ion-col>\\n    <ion-col></ion-col>\\n  </ion-row>\\n  <ion-row>\\n    <ion-col>\\n      <ion-button color=\\\"primary\\\" (click)=\\\"AccessCamera()\\\"><ion-icon name=\\\"camera\\\"> Camera</ion-icon></ion-button>\\n      <ion-button color=\\\"primary\\\" (click)=\\\"AccessGallery()\\\"><ion-icon name=\\\"image\\\"> Gallery</ion-icon></ion-button>\\n    </ion-col>\\n  </ion-row>\\n  <ion-row>\\n    <ion-col>\\n      <img [src]=\\\"base64Image\\\" *ngIf=\\\"base64Image\\\" />\\n      <ion-button color=\\\"primary\\\" (click)=\\\"Upload()\\\" *ngIf=\\\"base64Image\\\"><ion-icon name=\\\"image\\\"> Upload</ion-icon></ion-button>\\n    </ion-col>\\n  </ion-row>\\n<ion-row>\\n    <ion-col size=\\\"12\\\">\\n      <ion-item>\\n        <ion-input [(ngModel)]=\\\"comment\\\" name=\\\"comment\\\" type=\\\"text\\\" placeholder=\\\"หมายเหตุ ชื่อผู้เซนต์รับของ\\\" ></ion-input>\\n      </ion-item>\\n    </ion-col>\\n  </ion-row>\\n  \\n<ion-footer>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <ion-button color=\\\"danger\\\" (click)=\\\"clearPad()\\\">Clear</ion-button>\\n        <ion-button color=\\\"primary\\\" (click)=\\\"savePad()\\\">Save</ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-footer>\";","import { Component, OnInit } from '@angular/core';\nimport { ViewChild } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { SignaturePad } from 'angular2-signaturepad/signature-pad';\nimport { Storage } from '@ionic/storage';\nimport { ToastController } from '@ionic/angular';\nimport { Camera } from '@ionic-native/Camera/ngx';\nimport { RestApiService } from '../../../rest-api.service';\nimport { LoadingController } from '@ionic/angular';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\n\n\n@Component({\n  selector: 'app-send-confirm',\n  templateUrl: './send-confirm.page.html',\n  styleUrls: ['./send-confirm.page.scss'],\n})\nexport class SendConfirmPage implements OnInit {\n\tsignature = '';\n  \tisDrawing = false;\n  \tsendDetail: any;\n  \tconnote_new: any;\n  \tconnote_new_string_url: any;\n  \tobjVal: any;\n    comment: any;\n  \t@ViewChild(SignaturePad,{ read: false, static: false }) signaturePad: SignaturePad;\n\tpublic signaturePadOptions: Object = { \n\t    'minWidth': 2,\n\t    'canvasWidth': 400,\n\t    'canvasHeight': 200,\n\t    'backgroundColor': '#f6fbff',\n\t    'penColor': '#666a73'\n\t};\n\tbase64Image: any;\n\tpicture: any;\n  \tconstructor(public navController: NavController, \n  \t\tpublic storage: Storage, public toastCtrl: ToastController, \n  \t\tpublic api: RestApiService, \n    \tpublic loadingController: LoadingController,\n  \t\tpublic camera: Camera,\n  \t\tpublic route: ActivatedRoute,\n  \t\tpublic http: HttpClient,\n      public router: Router) { }\n\n  \tngOnInit() {\n  \t}\n\n  \tionViewDidEnter() {\n    this.signaturePad.clear()\n    \t\n    \tthis.storage.get('savedSignature').then((data) => {\n      \tthis.signature = data;\n    });\n  }\n \n  drawComplete() {\n    this.isDrawing = false;\n  }\n \n  drawStart() {\n    this.isDrawing = true;\n  }\n \n  async savePad() {\n    this.signature = this.signaturePad.toDataURL('png',80);\n    this.storage.set('savedSignature', this.signature);\n    this.base64Image;\n\n    const loading = await this.loadingController.create({\n    // content: 'Loading'\n    });\n    this.connote_new_string_url = '';\n    this.storage.get('keyOfDataSend').then((val) => {\n    \t// console.log('val = '+JSON.parse(val));\n    \tthis.objVal = val;\n\n    \t// console.log(this.objVal);\n    \t// for (let entry in this.objVal){\n    \t// \t// this.\n    \t// \t// console.log(this.objVal[entry]['barcode']);\n    \t// \tif(this.objVal[entry]['barcode']!=''){\n\t    // \t\tthis.connote_new_string_url += ','+this.objVal[entry]['barcode'];\n\t    // \t}\n    \t// }\n    \t// console.log(this.connote_new_string_url);\n    \t// console.log(this.connote_new_string_url);\n      // console.log(JSON.parse(val));\n      // this.textPrint = JSON.parse(val);\n    });\n    await loading.present();\n    // var headers = new Headers();\n     // headers.append(\"Accept\", 'application/json');\n     // headers.append('Content-Type', 'application/x-www-form-urlencoded' );\n     // console.log(this.route.snapshot.paramMap.get('id'));\n    if(this.signature){\n      this.signature = this.signature.replace(/data/gi , \"\"); \n    }\n    \n    if(this.base64Image){\n      this.base64Image = this.base64Image.replace(/data/gi , \"\"); \n    }\n    const formData = new FormData();\n    formData.append('signature' ,this.signature);\n    formData.append('barcode',this.objVal);\n    formData.append('image',this.base64Image);\n    formData.append('comment',this.comment);\n    formData.append('jobs_id',this.route.snapshot.paramMap.get('id'));\n\n    await this.api.confirmSend(formData,this.route.snapshot.paramMap.get('id'),this.objVal).subscribe(res => {\n        // console.log('>');\n        // console.log(res.result);\n        // console.log('<');\n        this.sendDetail = res;\n        this.storage.set('keyOfDataSend', '');\n        loading.dismiss();\n        console.log(res);\n        if(res.result==\"success\"){\n          this.router.navigate(['members/dashboard/send']);\n        }\n        // console.log(this.sendDetail);\n\n    }, err => {\n      console.log(err);\n      loading.dismiss();\n    });\n   //  let postData =  {\n   //      signature: this.signature,\n  \t// \tfile: this.base64Image,\n  \t// \tid_book:this.route.snapshot.paramMap.get('id'),\n  \t// \tconnote_new:this.connote_new_string_url\n  \t// }\n\n   //    this.http.post('http://af1express.com/api/ajax/post_job.php', postData,{observe: 'response'})\n   //     .subscribe(data => {\n   //     \tconsole.log(data);\n   //      }, error => {\n   //       // return error;\n   //     });\n    // await this.api.confirmJob(this.route.snapshot.paramMap.get('id'),this.signature,this.base64Image,this.connote_new_string_url).subscribe(res => {\n    //   // console.log(res);\n    //   this.sendDetail = res;\n    //   // console.log(this.loginDetail);\n    //   loading.dismiss();\n    //   console.log(this.sendDetail);\n    //   if(this.sendDetail.result=='success'){\n        \n    //   }\n    // }, err => {\n    //   console.log(err);\n    //   loading.dismiss();\n    // });\n    // console.log(this.signature);\n    // this.signaturePad.clear();\n    // let toast = this.toastCtrl.create({\n    //   message: 'New Signature saved.',\n    //   duration: 3000\n    // });\n    // toast.present();\n  }\n \n  \tclearPad() {\n    \tthis.signaturePad.clear();\n  \t}\n  \tAccessCamera(){\n\n\t this.camera.getPicture({\n\n\t targetWidth:512,\n\n\t targetHeight:512,\n\n\t correctOrientation:true,\n\n\t sourceType: this.camera.PictureSourceType.CAMERA,\n\n\t destinationType: this.camera.DestinationType.DATA_URL\n\n\t   }).then((imageData) => {\n\n\t     this.base64Image = 'data:image/jpeg;base64,'+imageData;\n\n\t     this.picture = imageData;\n\n\t         }, (err) => {\n\n\t     console.log(err);\n\n\t   });\n\n\t}\n\n\tAccessGallery(){\n\n\t this.camera.getPicture({\n\n\t    sourceType: this.camera.PictureSourceType.SAVEDPHOTOALBUM,\n\n\t    destinationType: this.camera.DestinationType.DATA_URL\n\n\t   }).then((imageData) => {\n\n\t     this.base64Image = 'data:image/jpeg;base64,'+imageData;\n\n\t     this.picture = imageData;\n\n\t        }, (err) => {\n\n\t     console.log(err);\n\n\t   });\n\n\t}\n\tUpload(){\n\t  \t// var headers = new Headers();\n\t  \t// headers.append(\"Accept\", \"application/json\");\n\t  \t// headers.append(\"Content-Type\", \"application/json\" );\n\n\t  // let options = new RequestOptions({ headers: headers });\n\n\t    // let data = {\n\n\t    \n\n\t    // };\n\n\t  // let loader = this.loading.create({\n\n\t  // content: \"Processing please wait…\",\n\n\t// });\n\t}\n}\n"]}