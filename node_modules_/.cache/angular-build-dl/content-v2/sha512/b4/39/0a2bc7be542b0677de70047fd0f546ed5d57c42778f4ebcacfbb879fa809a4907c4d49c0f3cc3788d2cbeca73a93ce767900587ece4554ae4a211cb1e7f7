!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{w56J:function(n,o,r){"use strict";r.r(o),r.d(o,"ScanPageModule",(function(){return x}));var i=r("ofXK"),a=r("3Pt+"),c=r("tyNb"),s=r("c7TG"),l=r("mrSG"),u=r("WdVq"),d=r("SmVF"),m=r("HSMY"),h=r("fXoL"),p=r("e8h1"),b=r("tk/3");function f(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-item"),h["\u0275\u0275elementStart"](1,"ion-row"),h["\u0275\u0275elementStart"](2,"ion-col",3),h["\u0275\u0275elementStart"](3,"ion-label"),h["\u0275\u0275elementStart"](4,"b"),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"ion-col",3),h["\u0275\u0275elementStart"](8,"ion-label"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"ion-col",3),h["\u0275\u0275elementStart"](11,"ion-label"),h["\u0275\u0275text"](12),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;h["\u0275\u0275advance"](5),h["\u0275\u0275textInterpolate"](n.key),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate2"](" ",n.consignee_name," ",n.consignee_company,""),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](n.consignee_address),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](n.consignee_phone)}}function g(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"ion-item"),h["\u0275\u0275elementStart"](1,"ion-row"),h["\u0275\u0275elementStart"](2,"ion-col",12),h["\u0275\u0275elementStart"](3,"ion-button",13),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit;return h["\u0275\u0275nextContext"]().rmBarcode(e)})),h["\u0275\u0275element"](4,"ion-icon",14),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"ion-col",15),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;h["\u0275\u0275advance"](6),h["\u0275\u0275textInterpolate1"](" ",o," ")}}var v,S,k=[{path:"",component:(v=function(){function n(t,o,r,i,a,c,s,l,u,d){e(this,n),this.barcodeScanner=t,this.toastCtrl=o,this.api=r,this.toast=i,this.storage=a,this.route=c,this.toastController=s,this.loadingController=l,this.http=u,this.router=d,this.barcodeInput=[],this.barcodePush=[],this.connote_new=[],this.count_connote=0,this.objVal=[],this.connotes=[]}var o,r,i;return o=n,(r=[{key:"ngOnInit",value:function(){this.id_booking=this.route.snapshot.paramMap.get("id"),console.log(this.id_booking),this.getJobDetail()}},{key:"ionViewWillEnter",value:function(){this.getJobDetail()}},{key:"getJobDetail",value:function(){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({});case 2:return t=e.sent,e.next=5,this.api.getJobDetail(this.route.snapshot.paramMap.get("id")).subscribe((function(e){console.log("getJobDetail"),console.log(e),n.connotes=e.connotes,console.log(e.connotes),n.count_connote=Number(e.count_connotes),console.log("start connote"),console.log(e.count_connotes),t.dismiss()}),(function(e){console.log(e),t.dismiss()}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"scan",value:function(){var e=this;this.options={prompt:"Place a barcode inside the scan area",disableSuccessBeep:!1,resultDisplayDuration:500,saveHistory:!0,showTorchButton:!0,showFlipCameraButton:!0},this.barcodeScanner.scan(this.options).then((function(t){if(e.barcode=t.text,t.cancelled)return console.log("User cancelled the action!"),!1;e.check_loop=0,""!=e.barcode&&(e.barcodePush.forEach((function(t){t==e.barcode&&(e.check_loop=1)})),0==e.check_loop?(e.barcodePush.push(e.barcode),e.count_connote=Number(e.count_connote)+1,e.storage.set("keyOfData",JSON.stringify(e.barcodePush)),e.alert(e.barcode),e.connote_new.push(e.barcode),e.toast.show(t.text,"200","center").subscribe((function(e){console.log(e)}))):e.alert(e.barcode+" Dupplicate.")),e.barcode=""}),(function(t){e.toast.show(t,"5000","center").subscribe((function(e){console.log(e)}))}))}},{key:"saveConnote",value:function(){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({});case 2:return t=e.sent,e.next=5,t.present();case 5:return(n=new FormData).append("booking_id",this.route.snapshot.paramMap.get("id")),e.next=9,this.api.saveConnote(n,this.route.snapshot.paramMap.get("id"),this.barcodePush).subscribe((function(e){t.dismiss(),"success"==e.result?(o.alert("Success"),o.router.navigate(["members/job-detail/"+o.route.snapshot.paramMap.get("id")])):o.alert("Error booking_id: "+o.route.snapshot.paramMap.get("id"))}),(function(e){console.log(e),t.dismiss()}));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"rmBarcode",value:function(e){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({});case 2:return n=t.sent,t.next=5,n.present();case 5:this.api.deleteJob(e).subscribe((function(t){if(console.log(t),"success"==t.result){o.count_connote=Number(o.count_connote)-1,o.count_connote<0&&(o.count_connote=0);var r=o.barcodePush.indexOf(e);-1!==r&&o.barcodePush.splice(r,1),n.dismiss(),o.alert(t.result+" "+t.desc)}else o.alert(t.result+" "+t.desc)}),(function(e){o.alert(e),console.log(e),n.dismiss()}));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"editBarcode",value:function(e){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({});case 2:return n=t.sent,t.next=5,n.present();case 5:this.api.deleteJob(e).subscribe((function(t){if(console.log(t),"success"==t.result){o.count_connote=Number(o.count_connote)-1,o.count_connote<0&&(o.count_connote=0);var r=o.barcodePush.indexOf(e);-1!==r&&o.barcodePush.splice(r,1),n.dismiss(),o.alert(t.result+" "+t.desc)}else o.alert(t.result+" "+t.desc)}),(function(e){o.alert(e),console.log(e),n.dismiss()}));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"removeBarcode",value:function(){this.storage.set("keyOfData","")}},{key:"submitForm",value:function(){var e=this;this.check_loop=0,""!=this.barcode&&(this.barcodePush.forEach((function(t){t==e.barcode&&(e.check_loop=1)})),0==this.check_loop?(this.barcodePush.push(this.barcode),this.count_connote=Number(this.count_connote)+1,this.storage.set("keyOfData",JSON.stringify(this.barcodePush)),this.alert(this.barcode),this.connote_new.push(this.barcode)):this.alert(this.barcode+" Dupplicate."),this.barcode="")}},{key:"jobDetail",value:function(){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.router.navigate(["members/job-detail/"+this.route.snapshot.paramMap.get("id")]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"alert",value:function(e){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:"Add connote "+e,duration:2e3});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}}])&&t(o.prototype,r),i&&t(o,i),n}(),v.\u0275fac=function(e){return new(e||v)(h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](s.K),h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](p.b),h["\u0275\u0275directiveInject"](c.a),h["\u0275\u0275directiveInject"](s.K),h["\u0275\u0275directiveInject"](s.E),h["\u0275\u0275directiveInject"](b.a),h["\u0275\u0275directiveInject"](c.f))},v.\u0275cmp=h["\u0275\u0275defineComponent"]({type:v,selectors:[["app-scan"]],decls:32,vars:5,consts:[[1,"header"],["slot","start"],["color","warning","expand","full",3,"click"],["size","12"],[4,"ngFor","ngForOf"],[3,"ngSubmit"],["form","ngForm"],["name","barcode","type","text","placeholder","\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e25\u0e02\u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e49\u0e14","required","",3,"ngModel","ngModelChange"],["size","6"],["expand","full","type","submit","color","primary",3,"disabled"],["expand","full","type","button","color","primary",3,"click"],["color","primary","size","small","expand","full",3,"click"],["size","4"],["color","danger","expand","",3,"click"],["name","close"],["size","8"]],template:function(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-header"),h["\u0275\u0275elementStart"](1,"ion-toolbar",0),h["\u0275\u0275elementStart"](2,"ion-buttons",1),h["\u0275\u0275elementStart"](3,"ion-button",2),h["\u0275\u0275listener"]("click",(function(){return t.jobDetail()})),h["\u0275\u0275text"](4,"< \u0e01\u0e25\u0e31\u0e1a"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"ion-title"),h["\u0275\u0275text"](6,"\u0e41\u0e2a\u0e01\u0e19\u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e14 Connote"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"ion-content"),h["\u0275\u0275elementStart"](8,"ion-item"),h["\u0275\u0275elementStart"](9,"ion-row"),h["\u0275\u0275elementStart"](10,"ion-col",3),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](12,f,13,5,"ion-item",4),h["\u0275\u0275template"](13,g,7,1,"ion-item",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"form",5,6),h["\u0275\u0275listener"]("ngSubmit",(function(){return t.submitForm()})),h["\u0275\u0275elementStart"](16,"ion-grid"),h["\u0275\u0275elementStart"](17,"ion-row"),h["\u0275\u0275elementStart"](18,"ion-col",3),h["\u0275\u0275elementStart"](19,"ion-item"),h["\u0275\u0275elementStart"](20,"ion-input",7),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.barcode=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"ion-row"),h["\u0275\u0275elementStart"](22,"ion-col",8),h["\u0275\u0275elementStart"](23,"ion-button",9),h["\u0275\u0275text"](24,"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19 \u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e49\u0e14"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"ion-col",8),h["\u0275\u0275elementStart"](26,"ion-button",10),h["\u0275\u0275listener"]("click",(function(){return t.scan()})),h["\u0275\u0275text"](27,"\u0e43\u0e0a\u0e49\u0e01\u0e25\u0e49\u0e2d\u0e07\u0e2a\u0e41\u0e01\u0e19"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"ion-row"),h["\u0275\u0275elementStart"](29,"ion-col",3),h["\u0275\u0275elementStart"](30,"ion-button",11),h["\u0275\u0275listener"]("click",(function(){return t.saveConnote()})),h["\u0275\u0275text"](31,"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19 Connote"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275reference"](15);h["\u0275\u0275advance"](11),h["\u0275\u0275textInterpolate1"](" \u0e08\u0e33\u0e19\u0e27\u0e19 Connote ",t.count_connote," "),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.connotes),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.barcodePush),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngModel",t.barcode),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("disabled",n.invalid)}},directives:[s.n,s.B,s.g,s.f,s.A,s.k,s.q,s.w,s.j,i.i,a.j,a.e,a.f,s.m,s.p,s.J,a.i,a.d,a.g,s.r,s.o],styles:[".header[_ngcontent-%COMP%]{padding:20px 0;--background:#3f51b5}.header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff}"]}),v)}],x=((S=function t(){e(this,t)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:S}),S.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||S)},imports:[[i.b,a.b,s.C,c.h.forChild(k)]]}),S)}}])}();