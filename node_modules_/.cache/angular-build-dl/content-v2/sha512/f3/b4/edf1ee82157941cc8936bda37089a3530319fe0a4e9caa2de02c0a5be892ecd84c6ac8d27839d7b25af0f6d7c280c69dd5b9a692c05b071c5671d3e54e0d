{"version":3,"sources":["webpack:///src/app/members/dashboard/job-detail/job-detail.page.scss","webpack:///src/app/members/dashboard/job-detail/job-detail.page.ts","webpack:///src/app/members/dashboard/job-detail/job-detail.page.html","webpack:///src/app/members/dashboard/job-detail/job-detail.module.ts"],"names":["JobDetailPage","api","loadingController","route","router","callNumber","storage","detail","getJobDetail","id_booking","snapshot","paramMap","get","create","loading","present","getJobDetailCount","subscribe","res","data","count_connotes","connote_count","console","log","connotes","dismiss","err","then","val","set","number","id","updateJob","connote_new","navigate","selector","template","routes","path","component","JobDetailPageModule","imports","forChild","declarations"],"mappings":"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","file":"dashboard-job-detail-job-detail-module-es5.js","sourcesContent":["export default \".header {\\n  padding: 20px 0;\\n  --background: #3f51b5;\\n}\\n\\n.header ion-title,\\n.header ion-back-button {\\n  color: #fff;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVtYmVycy9kYXNoYm9hcmQvam9iLWRldGFpbC9qb2ItZGV0YWlsLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNDLGVBQUE7RUFDQSxxQkFBQTtBQUNEOztBQUNBOztFQUVDLFdBQUE7QUFFRCIsImZpbGUiOiJzcmMvYXBwL21lbWJlcnMvZGFzaGJvYXJkL2pvYi1kZXRhaWwvam9iLWRldGFpbC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaGVhZGVyIHtcclxuXHRwYWRkaW5nOiAyMHB4IDA7XHJcblx0LS1iYWNrZ3JvdW5kOiAjM2Y1MWI1O1xyXG59XHJcbi5oZWFkZXIgaW9uLXRpdGxlLFxyXG4uaGVhZGVyIGlvbi1iYWNrLWJ1dHRvbiB7XHJcblx0Y29sb3I6ICNmZmY7XHJcbn1cclxuIl19 */\";","import { Component, OnInit } from '@angular/core';\nimport { LoadingController } from '@ionic/angular';\nimport { RestApiService } from '../../../rest-api.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CallNumber } from '@ionic-native/call-number/ngx';\nimport { Storage } from '@ionic/storage';\n\n@Component({\n  selector: 'app-job-detail',\n  templateUrl: './job-detail.page.html',\n  styleUrls: ['./job-detail.page.scss'],\n})\nexport class JobDetailPage implements OnInit {\n\tdetail: any = {};\n\tconnotes: any;\n\tconnote_new:any;\n\tid_booking:any;\n\tcount_connotes:any;\n  constructor(public api: RestApiService,\n  public loadingController: LoadingController,\n  public route: ActivatedRoute,\n  public router: Router,\n  public callNumber: CallNumber,\n  private storage: Storage,\n  ) { }\n\n  ngOnInit() {\n  \tthis.getJobDetail();\n  }\n  ionViewWillEnter(){\n  \tthis.getJobDetail();\n    // this.storage.get('keyOfData').then((val) => {\n    // \tif(val!=''){\n\t   //  \tthis.connote_new = JSON.parse(val);\n\t   //  }\n    // });\n  }\n  async getJobDetail() {\n  \t\tthis.id_booking = this.route.snapshot.paramMap.get('id');\n\t  \tconst loading = await this.loadingController.create({\n\t    // content: 'Loading'\n\t  \t});\n\t  \tawait loading.present();\n\t  \tawait this.api.getJobDetailCount(this.route.snapshot.paramMap.get('id'))\n\t    .subscribe(res => {\n\t      // console.log(res);\n\t      this.detail = res.data;\n\t      // console.log(res.data.connotes);\n\t      this.count_connotes = res.connote_count;\n\t      console.log(this.connotes);\n\t      // console.log(this.detail);\n\t      loading.dismiss();\n\t    }, err => {\n\t      console.log(err);\n\t      loading.dismiss();\n\t    });\n\t    this.storage.get('keyOfData').then((val) => {\n\t    \t// console.log(val);\n\t    \tif(val!=''){\n\t\t    \t// this.connote_new = JSON.parse(val);\n\t\t    \tthis.storage.set('keyOfData', '');\n\t\t    }\n\t      // console.log(JSON.parse(val));\n\t      // this.textPrint = JSON.parse(val);\n\t    });\n\t}\n\tasync callNow(number) {\n\t    this.callNumber.callNumber(number, true)\n\t      .then(res => console.log('Launched dialer!', res))\n\t      .catch(err => console.log('Error launching dialer', err));\n\t}\n\tasync notAccept(id){\n\t\tconst loading = await this.loadingController.create({\n\t    // content: 'Loading'\n\t  \t});\n\t\tawait loading.present();\n\t  \tawait this.api.updateJob(this.route.snapshot.paramMap.get('id'),'pending')\n\t    .subscribe(res => {\n\t      this.getJobDetail();\n\t      loading.dismiss();\n\t      // this.router.navigateByUrl('/members/dashboard/job');\n\t      // this.router.navigate(['/members/dashboard/job']);\n\t    }, err => {\n\t      console.log(err);\n\t      loading.dismiss();\n\t    });\n\t}\n\tasync accept(){\n\t\tconst loading = await this.loadingController.create({\n\t    // content: 'Loading'\n\t  \t});\n\t\tawait loading.present();\n\t  \tawait this.api.updateJob(this.route.snapshot.paramMap.get('id'),'inprogress')\n\t    .subscribe(res => {\n\t      this.getJobDetail();\n\t      loading.dismiss();\n\t      // this.router.navigateByUrl('/members/dashboard/job');\n\t      // this.router.navigate(['/members/dashboard/job']);\n\t    }, err => {\n\t      console.log(err);\n\t      loading.dismiss();\n\t    });\n\t}\n\tasync jobCancle(){\n\t\tthis.connote_new = [];\n\t\tthis.router.navigate(['members/dashboard/job']);\n\t}\n\tasync jobConfirm(id_booking){\n\t\tthis.router.navigate(['members/job-confirm/'+id_booking]);\n\t}\n\tasync listJob(){\n\t\tthis.router.navigate(['members/dashboard/job']);\n\t}\n}\n","export default \"<ion-header>\\n  <ion-toolbar class=\\\"header\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"warning\\\" expand=\\\"full\\\" (click)=\\\"listJob()\\\">< กลับ</ion-button>\\n    </ion-buttons>\\n    <ion-title>รับสินค้า {{detail.key}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\t<ion-card>\\n\\t  <ion-card-content>\\n\\t    <ion-grid >\\n\\t        <ion-row>\\n\\t        \\t<ion-col size=\\\"6\\\">\\n\\t\\t\\t\\t\\t<ion-label>{{detail.person}}</ion-label>\\n\\t        \\t</ion-col>\\n\\t        \\t<ion-col size=\\\"6\\\">\\n\\t        \\t\\t<ion-label>\\n\\t        \\t\\t\\t<a button icon-start ion-button full (click)=\\\"callNow(detail.mobile)\\\">\\n\\t\\t\\t\\t\\t\\t    <ion-icon name=\\\"call\\\"></ion-icon>\\n\\t\\t\\t\\t\\t\\t    <i class=\\\"icon ion-ios-telephone\\\"></i> <strong>{{detail.mobile}}</strong>\\n\\t\\t\\t\\t\\t    </a>\\n\\t\\t\\t\\t\\t</ion-label>\\n\\t        \\t</ion-col>\\n\\t        \\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\t\\t<ion-label>{{detail.customer_name}}</ion-label>\\n\\t        \\t</ion-col>\\n\\t        \\t<ion-col size=\\\"12\\\">\\n\\t        \\t\\t<ion-label>{{detail.district}} {{detail.province}} {{detail.postcode}}</ion-label>\\n\\t        \\t</ion-col>\\n\\t        \\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\t\\t<ion-label>เวลารับสินค้า {{detail.get_datetime}}</ion-label>\\n\\t        \\t</ion-col>\\n\\t        </ion-row>\\n\\t        <ion-row *ngIf=\\\"detail.status == 'new'\\\">\\n\\t\\t\\t\\t<ion-col size=\\\"5\\\">\\n\\t\\t\\t\\t\\t<ion-button color=\\\"danger\\\" expand=\\\"full\\\" (click)=\\\"notAccept(detail.id)\\\">ไม่รับ</ion-button>\\n\\t        \\t</ion-col>\\n\\t        \\t<ion-col size=\\\"7\\\">\\n\\t\\t\\t\\t\\t<ion-button color=\\\"primary\\\" expand=\\\"full\\\" (click)=\\\"accept()\\\">รับ</ion-button>\\n\\t        \\t</ion-col>\\n\\t        </ion-row>\\n\\t\\t</ion-grid>\\n\\t  </ion-card-content>\\n\\t</ion-card>\\n\\t<ion-card>\\n\\t  \\t<ion-card-content>\\n\\t    \\t<ion-grid >\\n\\t    \\t\\t<ion-row>\\n\\t\\t\\t    \\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t    \\t\\t<b>จำนวน connote ทั้งหมด {{count_connotes}} connote</b>\\n\\t\\t\\t    \\t</ion-col>\\n\\t\\t\\t    </ion-row>\\n\\n\\t    \\t\\t<ion-row *ngIf=\\\"detail.status == 'inprogress'\\\">\\n\\t\\t        \\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\t\\t\\t<ion-button color=\\\"dark\\\" expand=\\\"full\\\" routerLink=\\\"/members/scan/{{id_booking}}\\\">เพิ่ม/แก้ไข connote</ion-button>\\n\\t\\t        \\t</ion-col>\\n\\t\\t        </ion-row>\\n\\t    \\t\\t\\n\\t\\t\\t    \\n\\t\\t\\t\\t<ion-row *ngIf=\\\"detail.status == 'inprogress'\\\">\\n\\t\\t        \\t<ion-col size=\\\"6\\\">\\n\\t\\t\\t\\t\\t\\t<ion-button color=\\\"danger\\\" expand=\\\"full\\\" (click)=\\\"jobCancle()\\\">ยกเลิก</ion-button>\\n\\t\\t        \\t</ion-col>\\n\\t\\t        \\t<ion-col size=\\\"6\\\">\\n\\t\\t\\t\\t\\t\\t<ion-button color=\\\"primary\\\" expand=\\\"full\\\" (click)=\\\"jobConfirm(detail.id_booking)\\\">ยืนยันรับสินค้า</ion-button>\\n\\t\\t        \\t</ion-col>\\n\\t\\t        </ion-row>\\n\\t\\t        <ion-row *ngIf=\\\"detail.status == 'pending'\\\">\\n\\t\\t        \\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\t\\t\\t<ion-button color=\\\"danger\\\" expand=\\\"full\\\"  routerLink=\\\"/members/dashboard/job\\\">คลิกที่นี่เพื่อย้อนกลับ</ion-button>\\n\\t\\t        \\t</ion-col>\\n\\t\\t        </ion-row>\\n\\t        </ion-grid>\\n\\t  \\t</ion-card-content>\\n\\t</ion-card>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { JobDetailPage } from './job-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: JobDetailPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [JobDetailPage]\n})\nexport class JobDetailPageModule {}\n"]}