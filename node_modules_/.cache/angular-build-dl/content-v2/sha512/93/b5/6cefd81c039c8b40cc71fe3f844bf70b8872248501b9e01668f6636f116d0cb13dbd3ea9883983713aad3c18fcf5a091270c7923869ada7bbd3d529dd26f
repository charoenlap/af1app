(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"Z+oU":function(e,t,n){"use strict";n.r(t),n.d(t,"ScanJobPageModule",(function(){return g}));var o=n("ofXK"),i=n("3Pt+"),s=n("tyNb"),r=n("c7TG"),c=n("mrSG"),a=n("WdVq"),l=n("SmVF"),d=n("HSMY"),h=n("fXoL"),m=n("e8h1");function u(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-item"),h["\u0275\u0275elementStart"](1,"ion-row"),h["\u0275\u0275elementStart"](2,"ion-col",3),h["\u0275\u0275elementStart"](3,"ion-label"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate1"](" ",e," ")}}function b(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-item"),h["\u0275\u0275elementStart"](1,"ion-row"),h["\u0275\u0275elementStart"](2,"ion-col",3),h["\u0275\u0275elementStart"](3,"ion-label"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate1"](" ",e.key," ")}}const p=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i,s,r,c){this.api=e,this.barcodeScanner=t,this.toast=n,this.storage=o,this.router=i,this.route=s,this.loadingController=r,this.toastController=c,this.barcodePush=[],this.connote_new=[],this.count_connote=0}ngOnInit(){this.getSend()}getSend(){return Object(c.b)(this,void 0,void 0,(function*(){const e=yield this.loadingController.create({});this.sends=[],yield e.present(),this.storage.get("emp_key").then(t=>{this.api.getSend(t).subscribe(t=>{console.log(t),"success"==t.result&&(this.sends=t.data),e.dismiss()},t=>{console.log(t),e.dismiss()})})}))}rmBarcode(e){return Object(c.b)(this,void 0,void 0,(function*(){const t=yield this.loadingController.create({});yield t.present(),this.api.deleteJob(e).subscribe(n=>{if(console.log(n),"success"==n.result){this.count_connote=Number(this.count_connote)-1,this.count_connote<0&&(this.count_connote=0);const o=this.barcodePush.indexOf(e);-1!==o&&this.barcodePush.splice(o,1),t.dismiss(),this.alert(n.result+" "+n.desc)}else this.alert(n.result+" "+n.desc)},e=>{this.alert(e),console.log(e),t.dismiss()})}))}scan(){this.options={prompt:"\u0e1e\u0e22\u0e32\u0e22\u0e32\u0e21\u0e27\u0e32\u0e07\u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e49\u0e14\u0e44\u0e27\u0e49\u0e15\u0e23\u0e07\u0e01\u0e25\u0e32\u0e07\u0e08\u0e2d",disableSuccessBeep:!1,resultDisplayDuration:500,saveHistory:!0,showTorchButton:!0,showFlipCameraButton:!0},this.barcodeScanner.scan(this.options).then(e=>{if(this.barcode=e.text,e.cancelled)return console.log("User cancelled the action!"),!1;this.check_loop=0,""!=this.barcode&&(this.barcodePush.forEach(e=>{e==this.barcode&&(this.check_loop=1)}),0==this.check_loop?(this.sendData(this.barcode),this.toast.show(e.text,"200","center").subscribe(e=>{console.log(e)})):this.alert(this.barcode+" Dupplicate."))},e=>{this.toast.show(e,"5000","center").subscribe(e=>{console.log(e)})})}submitForm(){return Object(c.b)(this,void 0,void 0,(function*(){""!=this.barcode&&(this.sendData(this.barcode),this.storage.set("keyOfDataJob",JSON.stringify(this.barcodePush))),this.storage.get("keyOfDataJob").then(e=>{""!=e&&(this.connote_new=JSON.parse(e))})}))}sendData(e){return Object(c.b)(this,void 0,void 0,(function*(){for(var t=!1,n=0;n<=this.barcodePush.length-1;n++)this.barcodePush[n]==this.barcode&&(t=!0);if(t);else{const t=yield this.loadingController.create({});yield t.present(),this.storage.get("emp_key").then(n=>{this.emp_key=n,this.api.createJob(e,this.emp_key).subscribe(e=>{"success"==e.result?(this.connote_new.push(this.barcode),this.count_connote=Number(this.count_connote)+1,this.alert(e.result+" "+e.desc+" "+this.barcode),this.barcodePush.push(this.barcode),t.dismiss()):(this.alert(e.result+" "+e.desc),t.dismiss())},e=>{this.alert(e),console.log(e),t.dismiss()})})}}))}removeBarcode(){}alert(e){return Object(c.b)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:"Add connote "+e,duration:2e3})).present()}))}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](a.a),h["\u0275\u0275directiveInject"](l.a),h["\u0275\u0275directiveInject"](m.b),h["\u0275\u0275directiveInject"](s.f),h["\u0275\u0275directiveInject"](s.a),h["\u0275\u0275directiveInject"](r.E),h["\u0275\u0275directiveInject"](r.K))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["app-scan"]],decls:28,vars:5,consts:[[1,"header"],["slot","start"],["color","warning","expand","full","routerLink","/members/dashboard/send"],["size","12"],[4,"ngFor","ngForOf"],[3,"ngSubmit"],["form","ngForm"],["name","barcode","type","text","placeholder","\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e25\u0e02\u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e49\u0e14","required","",3,"ngModel","ngModelChange"],["size","6"],["expand","full","type","submit","color","primary",3,"disabled"],["color","dark","expand","full",3,"click"]],template:function(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-header"),h["\u0275\u0275elementStart"](1,"ion-toolbar",0),h["\u0275\u0275elementStart"](2,"ion-buttons",1),h["\u0275\u0275elementStart"](3,"ion-button",2),h["\u0275\u0275text"](4,"< \u0e01\u0e25\u0e31\u0e1a"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"ion-title"),h["\u0275\u0275text"](6,"\u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e14 Connote \u0e2a\u0e48\u0e07\u0e02\u0e2d\u0e07"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"ion-content"),h["\u0275\u0275elementStart"](8,"ion-item"),h["\u0275\u0275elementStart"](9,"ion-row"),h["\u0275\u0275elementStart"](10,"ion-col",3),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](12,u,5,1,"ion-item",4),h["\u0275\u0275template"](13,b,5,1,"ion-item",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"form",5,6),h["\u0275\u0275listener"]("ngSubmit",(function(){return t.submitForm()})),h["\u0275\u0275elementStart"](16,"ion-grid"),h["\u0275\u0275elementStart"](17,"ion-row"),h["\u0275\u0275elementStart"](18,"ion-col",3),h["\u0275\u0275elementStart"](19,"ion-item"),h["\u0275\u0275elementStart"](20,"ion-input",7),h["\u0275\u0275listener"]("ngModelChange",(function(e){return t.barcode=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"ion-row"),h["\u0275\u0275elementStart"](22,"ion-col",8),h["\u0275\u0275elementStart"](23,"ion-button",9),h["\u0275\u0275text"](24,"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19 \u0e1a\u0e32\u0e23\u0e4c\u0e42\u0e04\u0e49\u0e14"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"ion-col",8),h["\u0275\u0275elementStart"](26,"ion-button",10),h["\u0275\u0275listener"]("click",(function(){return t.scan()})),h["\u0275\u0275text"](27,"\u0e41\u0e2a\u0e01\u0e19 connote"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275reference"](15);h["\u0275\u0275advance"](11),h["\u0275\u0275textInterpolate1"](" \u0e08\u0e33\u0e19\u0e27\u0e19 Connote \u0e17\u0e35\u0e48\u0e40\u0e1e\u0e34\u0e48\u0e21 ",t.count_connote," "),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.barcodePush),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",t.sends),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngModel",t.barcode),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("disabled",e.invalid)}},directives:[r.n,r.B,r.g,r.f,r.I,s.g,r.A,r.k,r.q,r.w,r.j,o.i,i.j,i.e,i.f,r.m,r.p,r.J,i.i,i.d,i.g,r.r],styles:[".header[_ngcontent-%COMP%]{padding:20px 0;--background:#3f51b5}.header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff}"]}),e})()}];let g=(()=>{class e{}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.b,i.b,r.C,s.h.forChild(p)]]}),e})()}}]);