(function () {
  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  (window["webpackJsonp"] = window["webpackJsonp"] || []).push([["dashboard-job-confirm-job-confirm-module"], {
    /***/
    "GUKG":
    /*!*********************************************************************!*\
      !*** ./src/app/members/dashboard/job-confirm/job-confirm.page.scss ***!
      \*********************************************************************/

    /*! exports provided: default */

    /***/
    function GUKG(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony default export */


      __webpack_exports__["default"] = ".drawing-active {\n  background: #d6fffc;\n}\n\n.title {\n  text-align: center;\n  font-weight: bold;\n  padding: 10px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVtYmVycy9kYXNoYm9hcmQvam9iLWNvbmZpcm0vam9iLWNvbmZpcm0ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0MsbUJBQUE7QUFDRDs7QUFDQTtFQUNDLGtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxhQUFBO0FBRUQiLCJmaWxlIjoic3JjL2FwcC9tZW1iZXJzL2Rhc2hib2FyZC9qb2ItY29uZmlybS9qb2ItY29uZmlybS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZHJhd2luZy1hY3RpdmUge1xuXHRiYWNrZ3JvdW5kOiAjZDZmZmZjO1xufVxuLnRpdGxlIHtcblx0dGV4dC1hbGlnbjogY2VudGVyO1xuXHRmb250LXdlaWdodDogYm9sZDtcblx0cGFkZGluZzogMTBweDtcbn0iXX0= */";
      /***/
    },

    /***/
    "XOPx":
    /*!*********************************************************************!*\
      !*** ./src/app/members/dashboard/job-confirm/job-confirm.module.ts ***!
      \*********************************************************************/

    /*! exports provided: JobConfirmPageModule */

    /***/
    function XOPx(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "JobConfirmPageModule", function () {
        return JobConfirmPageModule;
      });
      /* harmony import */


      var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! tslib */
      "mrSG");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/core */
      "fXoL");
      /* harmony import */


      var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @angular/common */
      "ofXK");
      /* harmony import */


      var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! @angular/forms */
      "3Pt+");
      /* harmony import */


      var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! @angular/router */
      "tyNb");
      /* harmony import */


      var _ionic_angular__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! @ionic/angular */
      "c7TG");
      /* harmony import */


      var _job_confirm_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! ./job-confirm.page */
      "fWih");
      /* harmony import */


      var angular2_signaturepad__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! angular2-signaturepad */
      "Zw0B");
      /* harmony import */


      var angular2_signaturepad__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(angular2_signaturepad__WEBPACK_IMPORTED_MODULE_7__);

      var routes = [{
        path: '',
        component: _job_confirm_page__WEBPACK_IMPORTED_MODULE_6__["JobConfirmPage"]
      }];

      var JobConfirmPageModule = function JobConfirmPageModule() {
        _classCallCheck(this, JobConfirmPageModule);
      };

      JobConfirmPageModule = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormsModule"], _ionic_angular__WEBPACK_IMPORTED_MODULE_5__["IonicModule"], _angular_router__WEBPACK_IMPORTED_MODULE_4__["RouterModule"].forChild(routes), angular2_signaturepad__WEBPACK_IMPORTED_MODULE_7__["SignaturePadModule"]],
        declarations: [_job_confirm_page__WEBPACK_IMPORTED_MODULE_6__["JobConfirmPage"]]
      })], JobConfirmPageModule);
      /***/
    },

    /***/
    "fWih":
    /*!*******************************************************************!*\
      !*** ./src/app/members/dashboard/job-confirm/job-confirm.page.ts ***!
      \*******************************************************************/

    /*! exports provided: JobConfirmPage */

    /***/
    function fWih(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "JobConfirmPage", function () {
        return JobConfirmPage;
      });
      /* harmony import */


      var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! tslib */
      "mrSG");
      /* harmony import */


      var _raw_loader_job_confirm_page_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! raw-loader!./job-confirm.page.html */
      "nipd");
      /* harmony import */


      var _job_confirm_page_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! ./job-confirm.page.scss */
      "GUKG");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! @angular/core */
      "fXoL");
      /* harmony import */


      var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! @ionic/angular */
      "c7TG");
      /* harmony import */


      var angular2_signaturepad_signature_pad__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! angular2-signaturepad/signature-pad */
      "BSjz");
      /* harmony import */


      var angular2_signaturepad_signature_pad__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(angular2_signaturepad_signature_pad__WEBPACK_IMPORTED_MODULE_5__);
      /* harmony import */


      var _ionic_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! @ionic/storage */
      "e8h1");
      /* harmony import */


      var _ionic_native_Camera_ngx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! @ionic-native/Camera/ngx */
      "KqBo");
      /* harmony import */


      var _rest_api_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
      /*! ../../../rest-api.service */
      "HSMY");
      /* harmony import */


      var _angular_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
      /*! @angular/router */
      "tyNb");
      /* harmony import */


      var _angular_common_http__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
      /*! @angular/common/http */
      "tk/3");

      var JobConfirmPage = /*#__PURE__*/function () {
        function JobConfirmPage(navController, storage, toastCtrl, api, loadingController, camera, route, http, router) {
          _classCallCheck(this, JobConfirmPage);

          this.navController = navController;
          this.storage = storage;
          this.toastCtrl = toastCtrl;
          this.api = api;
          this.loadingController = loadingController;
          this.camera = camera;
          this.route = route;
          this.http = http;
          this.router = router;
          this.signature = '';
          this.isDrawing = false;
          this.signaturePadOptions = {
            'minWidth': 2,
            'canvasWidth': 400,
            'canvasHeight': 200,
            'backgroundColor': '#f6fbff',
            'penColor': '#666a73'
          };
        }

        _createClass(JobConfirmPage, [{
          key: "ngOnInit",
          value: function ngOnInit() {}
        }, {
          key: "ionViewDidEnter",
          value: function ionViewDidEnter() {
            var _this = this;

            this.signaturePad.clear();
            this.storage.get('savedSignature').then(function (data) {
              _this.signature = data;
            });
          }
        }, {
          key: "drawComplete",
          value: function drawComplete() {
            this.isDrawing = false;
          }
        }, {
          key: "drawStart",
          value: function drawStart() {
            this.isDrawing = true;
          }
        }, {
          key: "savePad",
          value: function savePad() {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
              var _this2 = this;

              var loading, formData;
              return regeneratorRuntime.wrap(function _callee$(_context) {
                while (1) {
                  switch (_context.prev = _context.next) {
                    case 0:
                      this.signature = this.signaturePad.toDataURL('png', 80);
                      this.storage.set('savedSignature', this.signature);
                      this.base64Image;
                      _context.next = 5;
                      return this.loadingController.create({// content: 'Loading'
                      });

                    case 5:
                      loading = _context.sent;
                      this.connote_new_string_url = '';
                      this.storage.get('keyOfData').then(function (val) {
                        // console.log('val = '+JSON.parse(val));
                        _this2.objVal = val; // console.log(this.objVal);
                        // for (let entry in this.objVal){
                        // 	// this.
                        // 	// console.log(this.objVal[entry]['barcode']);
                        // 	if(this.objVal[entry]['barcode']!=''){
                        // 		this.connote_new_string_url += ','+this.objVal[entry]['barcode'];
                        // 	}
                        // }
                        // console.log(this.connote_new_string_url);
                        // console.log(this.connote_new_string_url);
                        // console.log(JSON.parse(val));
                        // this.textPrint = JSON.parse(val);
                      });
                      _context.next = 10;
                      return loading.present();

                    case 10:
                      // var headers = new Headers();
                      // headers.append("Accept", 'application/json');
                      // headers.append('Content-Type', 'application/x-www-form-urlencoded' );
                      // console.log(this.route.snapshot.paramMap.get('id'));
                      formData = new FormData(); // console.log(this.signature);

                      if (this.signature) {
                        this.signature = this.signature.replace(/data/gi, "");
                      }

                      if (this.base64Image) {
                        this.base64Image = this.base64Image.replace(/data/gi, "");
                      }

                      formData.append('signature', this.signature);
                      formData.append('barcode', this.objVal);
                      formData.append('comment', this.comment);
                      formData.append('image', this.base64Image);
                      formData.append('booking_id', this.route.snapshot.paramMap.get('id')); // console.log('comment'+this.comment);
                      // console.log('form-data:');
                      // console.log(formData);
                      // let postData =  {
                      //   signature: this.signature,
                      //   barcode: this.objVal,
                      //   comment: this.comment,
                      //   image: this.base64Image,
                      //   booking_id: this.route.snapshot.paramMap.get('id')
                      // }

                      _context.next = 20;
                      return this.api.confirmJob(formData, this.route.snapshot.paramMap.get('id'), this.objVal, this.comment).subscribe(function (res) {
                        // console.log('>');
                        // console.log(res.result);
                        // console.log('<');
                        // console.log(this.comment);
                        _this2.sendDetail = res;

                        _this2.storage.set('keyOfData', '');

                        loading.dismiss();
                        console.log(res);

                        if (res.result == "success") {
                          _this2.router.navigate(['members/dashboard/job']);
                        } // console.log(this.sendDetail);

                      }, function (err) {
                        console.log(err);
                        loading.dismiss();
                      });

                    case 20:
                    case "end":
                      return _context.stop();
                  }
                }
              }, _callee, this);
            }));
          }
        }, {
          key: "clearPad",
          value: function clearPad() {
            this.signaturePad.clear();
          }
        }, {
          key: "AccessCamera",
          value: function AccessCamera() {
            var _this3 = this;

            this.camera.getPicture({
              targetWidth: 512,
              targetHeight: 512,
              correctOrientation: true,
              sourceType: this.camera.PictureSourceType.CAMERA,
              destinationType: this.camera.DestinationType.DATA_URL
            }).then(function (imageData) {
              _this3.base64Image = 'data:image/jpeg;base64,' + imageData;
              _this3.picture = imageData;
            }, function (err) {
              console.log(err);
            });
          }
        }, {
          key: "AccessGallery",
          value: function AccessGallery() {
            var _this4 = this;

            this.camera.getPicture({
              sourceType: this.camera.PictureSourceType.SAVEDPHOTOALBUM,
              destinationType: this.camera.DestinationType.DATA_URL
            }).then(function (imageData) {
              _this4.base64Image = 'data:image/jpeg;base64,' + imageData;
              _this4.picture = imageData;
            }, function (err) {
              console.log(err);
            });
          }
        }, {
          key: "Upload",
          value: function Upload() {// var headers = new Headers();
            // headers.append("Accept", "application/json");
            // headers.append("Content-Type", "application/json" );
            // let options = new RequestOptions({ headers: headers });
            // let data = {
            // };
            // let loader = this.loading.create({
            // content: "Processing please wait…",
            // });
          }
        }]);

        return JobConfirmPage;
      }();

      JobConfirmPage.ctorParameters = function () {
        return [{
          type: _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["NavController"]
        }, {
          type: _ionic_storage__WEBPACK_IMPORTED_MODULE_6__["Storage"]
        }, {
          type: _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["ToastController"]
        }, {
          type: _rest_api_service__WEBPACK_IMPORTED_MODULE_8__["RestApiService"]
        }, {
          type: _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["LoadingController"]
        }, {
          type: _ionic_native_Camera_ngx__WEBPACK_IMPORTED_MODULE_7__["Camera"]
        }, {
          type: _angular_router__WEBPACK_IMPORTED_MODULE_9__["ActivatedRoute"]
        }, {
          type: _angular_common_http__WEBPACK_IMPORTED_MODULE_10__["HttpClient"]
        }, {
          type: _angular_router__WEBPACK_IMPORTED_MODULE_9__["Router"]
        }];
      };

      JobConfirmPage.propDecorators = {
        signaturePad: [{
          type: _angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"],
          args: [angular2_signaturepad_signature_pad__WEBPACK_IMPORTED_MODULE_5__["SignaturePad"], {
            read: false,
            "static": false
          }]
        }]
      };
      JobConfirmPage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
        selector: 'app-job-confirm',
        template: _raw_loader_job_confirm_page_html__WEBPACK_IMPORTED_MODULE_1__["default"],
        styles: [_job_confirm_page_scss__WEBPACK_IMPORTED_MODULE_2__["default"]]
      }), Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_4__["NavController"], _ionic_storage__WEBPACK_IMPORTED_MODULE_6__["Storage"], _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["ToastController"], _rest_api_service__WEBPACK_IMPORTED_MODULE_8__["RestApiService"], _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["LoadingController"], _ionic_native_Camera_ngx__WEBPACK_IMPORTED_MODULE_7__["Camera"], _angular_router__WEBPACK_IMPORTED_MODULE_9__["ActivatedRoute"], _angular_common_http__WEBPACK_IMPORTED_MODULE_10__["HttpClient"], _angular_router__WEBPACK_IMPORTED_MODULE_9__["Router"]])], JobConfirmPage);
      /***/
    },

    /***/
    "nipd":
    /*!***********************************************************************************************************!*\
      !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/members/dashboard/job-confirm/job-confirm.page.html ***!
      \***********************************************************************************************************/

    /*! exports provided: default */

    /***/
    function nipd(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony default export */


      __webpack_exports__["default"] = "<ion-header>\n  <ion-toolbar class=\"header\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button></ion-back-button>\n    </ion-buttons>\n    <ion-title>รับสินค้า</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content padding no-bounce>\n  <div class=\"title\">ลายเซนต์</div>\n  <ion-row [ngClass]=\"{'drawing-active': isDrawing}\">\n    <ion-col></ion-col>\n    <ion-col>\n      <signature-pad [options]=\"signaturePadOptions\" (onBeginEvent)=\"drawStart()\" (onEndEvent)=\"drawComplete()\"></signature-pad>\n    </ion-col>\n    <ion-col></ion-col>\n  </ion-row>\n  <ion-row>\n    <ion-col>\n      <ion-button color=\"primary\" (click)=\"AccessCamera()\"><ion-icon name=\"camera\"> Camera</ion-icon></ion-button>\n      <ion-button color=\"primary\" (click)=\"AccessGallery()\"><ion-icon name=\"image\"> Gallery</ion-icon></ion-button>\n    </ion-col>\n  </ion-row>\n  <ion-row>\n    <ion-col>\n      <img [src]=\"base64Image\" *ngIf=\"base64Image\" />\n    </ion-col>\n  </ion-row>\n   <ion-row>\n    <ion-col size=\"12\">\n      <ion-item>\n        <ion-input [(ngModel)]=\"comment\" name=\"comment\" type=\"text\" placeholder=\"หมายเหตุ ชื่อผู้เซนต์รับของ\" ></ion-input>\n      </ion-item>\n    </ion-col>\n  </ion-row>\n  \n<ion-footer>\n  <ion-grid>\n    <ion-row>\n      <ion-col>\n        <ion-button color=\"danger\" (click)=\"clearPad()\">Clear</ion-button>\n        <ion-button color=\"primary\" (click)=\"savePad()\">Save</ion-button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-footer>";
      /***/
    }
  }]);
})();
//# sourceMappingURL=dashboard-job-confirm-job-confirm-module-es5.js.map