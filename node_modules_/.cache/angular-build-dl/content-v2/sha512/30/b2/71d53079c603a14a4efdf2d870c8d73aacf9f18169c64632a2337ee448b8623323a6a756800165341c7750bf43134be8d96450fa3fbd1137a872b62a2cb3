{"version":3,"sources":["webpack:///src/app/members/dashboard/scan/scan.page.scss","webpack:///src/app/members/dashboard/scan/scan.page.html","webpack:///src/app/members/dashboard/scan/scan.page.ts","webpack:///src/app/members/dashboard/scan/scan.module.ts"],"names":["ScanPage","barcodeScanner","toastCtrl","api","toast","storage","route","toastController","loadingController","http","router","barcodeInput","barcodePush","connote_new","count_connote","objVal","connotes","id_booking","snapshot","paramMap","get","console","log","getJobDetail","create","loading","subscribe","res","Number","count_connotes","dismiss","err","options","prompt","disableSuccessBeep","resultDisplayDuration","saveHistory","showTorchButton","showFlipCameraButton","scan","then","barcodeData","barcode","text","cancelled","check_loop","forEach","snap","push","set","JSON","stringify","alert","show","present","formData","FormData","append","saveConnote","result","navigate","message","deleteJob","index","indexOf","splice","desc","duration","selector","template","routes","path","component","ScanPageModule","imports","forChild","declarations"],"mappings":"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","file":"dashboard-scan-scan-module-es5.js","sourcesContent":["export default \".header {\\n  padding: 20px 0;\\n  --background: #3f51b5;\\n}\\n\\n.header ion-title,\\n.header ion-back-button {\\n  color: #fff;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVtYmVycy9kYXNoYm9hcmQvc2Nhbi9zY2FuLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNDLGVBQUE7RUFDQSxxQkFBQTtBQUNEOztBQUNBOztFQUVDLFdBQUE7QUFFRCIsImZpbGUiOiJzcmMvYXBwL21lbWJlcnMvZGFzaGJvYXJkL3NjYW4vc2Nhbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaGVhZGVyIHtcclxuXHRwYWRkaW5nOiAyMHB4IDA7XHJcblx0LS1iYWNrZ3JvdW5kOiAjM2Y1MWI1O1xyXG59XHJcbi5oZWFkZXIgaW9uLXRpdGxlLFxyXG4uaGVhZGVyIGlvbi1iYWNrLWJ1dHRvbiB7XHJcblx0Y29sb3I6ICNmZmY7XHJcbn0iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar class=\\\"header\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"warning\\\" expand=\\\"full\\\" (click)=\\\"jobDetail()\\\">< กลับ</ion-button>\\n    </ion-buttons>\\n    <ion-title>แสกนบาร์โคด Connote</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\t<ion-item>\\n\\t\\t<ion-row>\\n        \\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\tจำนวน Connote {{count_connote}}\\n        \\t</ion-col>\\n        </ion-row>\\n\\t</ion-item>\\n\\t<ion-item *ngFor=\\\"let connote of connotes\\\">\\n\\t\\t<ion-row>\\n        \\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\t<ion-label><b>{{connote.key}}</b> {{connote.consignee_name}} {{connote.consignee_company}}</ion-label>\\n        \\t</ion-col>\\n        \\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\t<ion-label>{{connote.consignee_address}}</ion-label>\\n        \\t</ion-col>\\n        \\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\t<ion-label>{{connote.consignee_phone}}</ion-label>\\n        \\t</ion-col>\\n        </ion-row>\\n    </ion-item> \\n\\t<ion-item *ngFor=\\\"let barcode of barcodePush\\\">\\n\\t\\t<ion-row>\\n        \\t<ion-col size=\\\"4\\\">\\n        \\t\\t<ion-button color=\\\"danger\\\" expand=\\\"\\\" (click)=\\\"rmBarcode(barcode)\\\"><ion-icon name=\\\"close\\\" ></ion-icon></ion-button> \\n        \\t</ion-col>\\n        \\t<ion-col size=\\\"8\\\">\\n\\t\\t\\t\\t{{barcode}}\\n        \\t</ion-col>\\n        </ion-row>\\n    </ion-item>\\n    \\n</ion-content>\\n<form #form=\\\"ngForm\\\" (ngSubmit)=\\\"submitForm()\\\" >\\n\\t<ion-grid >\\n        <ion-row>\\n        \\t<ion-col size=\\\"12\\\">\\n\\t          \\t<ion-item>\\n\\t\\t\\t\\t  <ion-input [(ngModel)]=\\\"barcode\\\" name=\\\"barcode\\\" type=\\\"text\\\" placeholder=\\\"หมายเลขบาร์โค้ด\\\" required></ion-input>\\n\\t\\t\\t\\t</ion-item>\\n        \\t</ion-col>\\n        </ion-row>\\n        <ion-row>\\n        \\t<ion-col size=\\\"6\\\">\\n\\t\\t\\t\\t  <!-- <ion-button expand=\\\"full\\\" color=\\\"danger\\\" type=\\\"button\\\" (click)=\\\"removeBarcode()\\\">ลบ บาร์โค้ดทั้งหมด</ion-button> -->\\n\\t\\t\\t\\t  <ion-button expand=\\\"full\\\" type=\\\"submit\\\" color=\\\"primary\\\" [disabled]=\\\"form.invalid\\\" >ยืนยัน บาร์โค้ด</ion-button>\\n        \\t</ion-col>\\n        \\t<ion-col size=\\\"6\\\">\\n\\t\\t\\t\\t  <ion-button expand=\\\"full\\\" type=\\\"button\\\" color=\\\"primary\\\" (click)=\\\"scan()\\\">ใช้กล้องสแกน</ion-button>\\n        \\t</ion-col>\\n        </ion-row>\\n    </ion-grid>\\n</form>\\n<ion-row>\\n\\t<ion-col size=\\\"12\\\">\\n\\t\\t<ion-button  color=\\\"primary\\\" size=\\\"small\\\" expand=\\\"full\\\" (click)=\\\"saveConnote()\\\">ยืนยัน Connote</ion-button>\\n\\t</ion-col>\\n</ion-row>\";","import { Component, OnInit } from '@angular/core';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\nimport { Toast } from '@ionic-native/toast/ngx';\nimport { Storage } from '@ionic/storage';\nimport { ToastController } from '@ionic/angular';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { RestApiService } from '../../../rest-api.service';\nimport { LoadingController } from '@ionic/angular';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-scan',\n  templateUrl: './scan.page.html',\n  styleUrls: ['./scan.page.scss'],\n})\nexport class ScanPage implements OnInit {\n  barcodeInput: any=[];\n  barcode: any;\n  textPrint:any;\n  barcodePush:any=[];\n  connote_new:any=[];\n  options:any;\n  id_booking:any;\n  check_loop:any;\n  count_connote:number=0;\n  objVal: any=[];\n  connotes: any=[];\n  // count_connotes: any[];\n  constructor(\n  private barcodeScanner: BarcodeScanner,\n  public toastCtrl: ToastController, \n  public api: RestApiService, \n  private toast: Toast,\n  private storage: Storage,\n  public route: ActivatedRoute,\n  public toastController: ToastController,\n  public loadingController: LoadingController,\n  public http: HttpClient,\n  public router: Router) { }\n\n  ngOnInit() {\n\n    this.id_booking = this.route.snapshot.paramMap.get('id');\n    console.log(this.id_booking);\n  \t// this.scan();\n    this.getJobDetail();\n  }\n  ionViewWillEnter(){\n    this.getJobDetail();\n  }\n  async getJobDetail() {\n    const loading = await this.loadingController.create({\n      // content: 'Loading'\n      });\n    await this.api.getJobDetail(this.route.snapshot.paramMap.get('id'))\n      .subscribe(res => {\n        console.log(\"getJobDetail\");\n        console.log(res);\n        // this.detail = res.data;\n        // console.log(res.data.connotes);\n        this.connotes = res.connotes;\n        console.log(res.connotes);\n        this.count_connote = Number(res.count_connotes);\n        console.log(\"start connote\");\n        console.log(res.count_connotes);\n        // console.log(this.detail);\n        loading.dismiss();\n      }, err => {\n        console.log(err);\n        loading.dismiss();\n      });\n  }\n  scan() {\n    this.options = {\n      // formats: \"QR_CODE\",\n      prompt : \"Place a barcode inside the scan area\",\n      // orientation : \"landscape\",\n      disableSuccessBeep: false,\n      resultDisplayDuration: 500,\n      saveHistory: true,\n      // torchOn: true,\n      showTorchButton : true,\n      showFlipCameraButton : true,\n      // preferFrontCamera : false\n    }\n  \tthis.barcodeScanner.scan(this.options).then((barcodeData) => {\n\n  \t\tthis.barcode = barcodeData.text;\n      if (barcodeData.cancelled) {\n        console.log(\"User cancelled the action!\");\n        return false;\n      }\n      this.check_loop = 0;\n      if(this.barcode!=''){\n        this.barcodePush.forEach((snap) => {\n          if(snap==this.barcode){\n            this.check_loop = 1;\n          }\n        });\n        if(this.check_loop == 0){\n          this.barcodePush.push(this.barcode);\n          this.count_connote = Number(this.count_connote) + 1;\n          this.storage.set('keyOfData', JSON.stringify(this.barcodePush));\n          this.alert(this.barcode);\n          this.connote_new.push(this.barcode);\n\n          // this.navCtrl.push(ScanQrDetailPage, {\n          //   data: this.scannedText\n          // });\n\n\n        \tthis.toast.show(barcodeData.text, '200', 'center').subscribe(\n    \t      toast => {\n    \t        console.log(toast);\n    \t      }\n    \t    );\n          // this.scan();\n        }else{\n          this.alert(this.barcode + ' ' + 'Dupplicate.');\n        }\n      }\n      \n      this.barcode = '';\n  \t}, (err) => {\n    \tthis.toast.show(err, '5000', 'center').subscribe(\n\t      toast => {\n\t        console.log(toast);\n\t      }\n\t    );\n\t  });\n  }\n  async saveConnote(){\n    const loading = await this.loadingController.create({\n    // content: 'Loading'\n    });\n    await loading.present();\n    const formData = new FormData();\n    formData.append('booking_id',this.route.snapshot.paramMap.get('id'));\n\n    await this.api.saveConnote(formData,this.route.snapshot.paramMap.get('id'),this.barcodePush).subscribe(res => {\n        loading.dismiss();\n        // console.log(\"saveConnote\");\n        // console.log(res);\n        if(res.result==\"success\"){\n          this.alert(\"Success\");\n          this.router.navigate(['members/job-detail/'+this.route.snapshot.paramMap.get('id')]);\n        }else{\n          this.alert(\"Error booking_id: \"+this.route.snapshot.paramMap.get('id'));\n        }\n    }, err => {\n      // this.alert(err);\n      console.log(err);\n      loading.dismiss();\n    });\n  }\n  async rmBarcode(message: string){\n    const loading = await this.loadingController.create({ });\n    await loading.present();\n    this.api.deleteJob(message).subscribe(res => {\n      console.log(res);\n      if(res.result==\"success\"){\n        this.count_connote = Number(this.count_connote) - 1;\n        if(this.count_connote<0){\n              this.count_connote = 0;\n            }\n        const index: number = this.barcodePush.indexOf(message);\n        if (index !== -1) {\n            this.barcodePush.splice(index, 1);\n        }\n        loading.dismiss();\n        // this.router.navigateByUrl('/members/dashboard/job');\n        // this.router.navigate(['/members/dashboard/job']);\n      \n        this.alert(res.result+\" \"+res.desc);\n      }else{\n        this.alert(res.result+\" \"+res.desc);\n      }\n      \n    }, err => {\n      this.alert(err);\n      console.log(err);\n      loading.dismiss();\n    });\n\n    \n    // delete [this.barcodePush.indexOf(message)];\n  }\n  async editBarcode(message: string){\n    const loading = await this.loadingController.create({ });\n    await loading.present();\n    this.api.deleteJob(message).subscribe(res => {\n      console.log(res);\n      if(res.result==\"success\"){\n        this.count_connote = Number(this.count_connote) - 1;\n        if(this.count_connote<0){\n              this.count_connote = 0;\n            }\n        const index: number = this.barcodePush.indexOf(message);\n        if (index !== -1) {\n            this.barcodePush.splice(index, 1);\n        }\n        loading.dismiss();\n        this.alert(res.result+\" \"+res.desc);\n      }else{\n        this.alert(res.result+\" \"+res.desc);\n      }\n      \n    }, err => {\n      this.alert(err);\n      console.log(err);\n      loading.dismiss();\n    });\n  }\n  removeBarcode(){\n    this.storage.set('keyOfData', '');\n  }\n  submitForm(){\n    // console.log(this.barcodePush);\n    this.check_loop = 0;\n    if(this.barcode!=''){\n      this.barcodePush.forEach((snap) => {\n        if(snap==this.barcode){\n          this.check_loop = 1;\n        }\n      });\n      if(this.check_loop == 0){\n        this.barcodePush.push(this.barcode);\n        this.count_connote = Number(this.count_connote) + 1;\n        this.storage.set('keyOfData', JSON.stringify(this.barcodePush));\n        this.alert(this.barcode);\n        this.connote_new.push(this.barcode);\n      }else{\n        this.alert(this.barcode + ' ' + 'Dupplicate.');\n      }\n      // console.log(this.connote_new);\n      this.barcode = '';\n    }\n    // this.storage.get('keyOfData').then((val) => {\n    //   if(val!=''){\n    //     this.connote_new = JSON.parse(val);\n    //   }\n    // });\n  \t// this.toast.show('Submit', '200', 'center').subscribe(\n   //    toast => {\n   //      // console.log(toast);\n   //    }\n   //  );\n   // this.storage.get('keyOfData').then((val) => {\n   //    console.log(val);\n   //    // this.textPrint = JSON.parse(val);\n   //  });\n  }\n  async jobDetail(){\n    this.router.navigate(['members/job-detail/'+this.route.snapshot.paramMap.get('id')]);\n  }\n  async alert(result){\n     const toast = await this.toastController.create({\n          message: 'Add connote '+result,\n          duration: 2000\n        });\n\n        toast.present();\n   }\n   \n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ScanPage } from './scan.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ScanPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ScanPage]\n})\nexport class ScanPageModule {}\n"]}