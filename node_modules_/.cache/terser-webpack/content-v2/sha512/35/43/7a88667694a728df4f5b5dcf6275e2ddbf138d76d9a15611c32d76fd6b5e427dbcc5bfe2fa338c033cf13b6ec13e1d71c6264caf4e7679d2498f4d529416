{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{bcbc:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"ScanBarcodeJobPageModule\",(function(){return scan_barcode_job_module_ScanBarcodeJobPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),router=__webpack_require__(\"tyNb\"),fesm5=__webpack_require__(\"c7TG\"),tslib_es6=__webpack_require__(\"mrSG\"),ngx=__webpack_require__(\"WdVq\"),_ivy_ngcc_ngx=__webpack_require__(\"SmVF\"),rest_api_service=__webpack_require__(\"HSMY\"),core=__webpack_require__(\"fXoL\"),ionic_storage=__webpack_require__(\"e8h1\");function ScanBarcodeJobPage_ion_item_18_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"ion-item\"),core[\"ɵɵelementStart\"](1,\"ion-row\"),core[\"ɵɵelementStart\"](2,\"ion-col\",4),core[\"ɵɵelementStart\"](3,\"ion-label\"),core[\"ɵɵtext\"](4),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const result_r2=ctx.$implicit;core[\"ɵɵadvance\"](4),core[\"ɵɵtextInterpolate\"](result_r2)}}const routes=[{path:\"\",component:(()=>{class ScanBarcodeJobPage{constructor(api,barcodeScanner,toast,storage,router,route,loadingController,toastController){this.api=api,this.barcodeScanner=barcodeScanner,this.toast=toast,this.storage=storage,this.router=router,this.route=route,this.loadingController=loadingController,this.toastController=toastController,this.barcodePush=[],this.connote_new=[]}ngOnInit(){this.scan()}scan(){this.options={prompt:\"Place a barcode inside the scan area\",disableSuccessBeep:!1,resultDisplayDuration:500,saveHistory:!0,showTorchButton:!0,showFlipCameraButton:!0},this.barcodeScanner.scan(this.options).then(barcodeData=>{if(this.barcode=barcodeData.text,barcodeData.cancelled)return console.log(\"User cancelled the action!\"),!1;\"\"!=this.barcode&&(this.barcodePush.push(this.barcode),this.storage.set(\"keyOfDataJob\",JSON.stringify(this.barcodePush)),this.alert(this.barcode),this.connote_new.push(this.barcode),this.sendData(this.barcode)),this.scan()},err=>{this.toast.show(err,\"5000\",\"center\").subscribe(toast=>{console.log(toast)})})}submitForm(){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){\"\"!=this.barcode&&this.sendData(this.barcode)}))}sendData(barcode){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){for(var duplicate=!1,i=0;i<=this.barcodePush.length-1;i++)this.barcodePush[i]==this.barcode&&(duplicate=!0);if(duplicate);else{const loading=yield this.loadingController.create({});yield loading.present(),this.storage.get(\"emp_key\").then(val=>{this.emp_key=val,this.api.createJob(barcode,this.emp_key).subscribe(res=>{console.log(res),this.alert(res.result),this.barcodePush.push(this.barcode),loading.dismiss()},err=>{console.log(err),loading.dismiss()})})}}))}removeBarcode(){this.storage.set(\"keyOfDataJob\",\"\")}alert(result){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:\"Add connote \"+result,duration:2e3})).present()}))}}return ScanBarcodeJobPage.ɵfac=function(t){return new(t||ScanBarcodeJobPage)(core[\"ɵɵdirectiveInject\"](rest_api_service.a),core[\"ɵɵdirectiveInject\"](ngx.a),core[\"ɵɵdirectiveInject\"](_ivy_ngcc_ngx.a),core[\"ɵɵdirectiveInject\"](ionic_storage.b),core[\"ɵɵdirectiveInject\"](router.f),core[\"ɵɵdirectiveInject\"](router.a),core[\"ɵɵdirectiveInject\"](fesm5.E),core[\"ɵɵdirectiveInject\"](fesm5.K))},ScanBarcodeJobPage.ɵcmp=core[\"ɵɵdefineComponent\"]({type:ScanBarcodeJobPage,selectors:[[\"app-scan\"]],decls:19,vars:3,consts:[[1,\"header\"],[\"slot\",\"start\"],[3,\"ngSubmit\"],[\"form\",\"ngForm\"],[\"size\",\"12\"],[\"name\",\"barcode\",\"type\",\"text\",\"placeholder\",\"หมายเลขบาร์โค้ด\",\"required\",\"\",3,\"ngModel\",\"ngModelChange\"],[\"expand\",\"full\",\"type\",\"submit\",\"color\",\"primary\",3,\"disabled\"],[4,\"ngFor\",\"ngForOf\"]],template:function(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"ion-header\"),core[\"ɵɵelementStart\"](1,\"ion-toolbar\",0),core[\"ɵɵelementStart\"](2,\"ion-buttons\",1),core[\"ɵɵelement\"](3,\"ion-back-button\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](4,\"ion-title\"),core[\"ɵɵtext\"](5,\"แสกนบาร์โคด Connote ส่งของ\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](6,\"ion-content\"),core[\"ɵɵelementStart\"](7,\"form\",2,3),core[\"ɵɵlistener\"](\"ngSubmit\",(function(){return ctx.submitForm()})),core[\"ɵɵelementStart\"](9,\"ion-grid\"),core[\"ɵɵelementStart\"](10,\"ion-row\"),core[\"ɵɵelementStart\"](11,\"ion-col\",4),core[\"ɵɵelementStart\"](12,\"ion-item\"),core[\"ɵɵelementStart\"](13,\"ion-input\",5),core[\"ɵɵlistener\"](\"ngModelChange\",(function($event){return ctx.barcode=$event})),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](14,\"ion-row\"),core[\"ɵɵelementStart\"](15,\"ion-col\",4),core[\"ɵɵelementStart\"](16,\"ion-button\",6),core[\"ɵɵtext\"](17,\"ยืนยัน บาร์โค้ด\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](18,ScanBarcodeJobPage_ion_item_18_Template,5,1,\"ion-item\",7),core[\"ɵɵelementEnd\"]()),2&rf){const _r0=core[\"ɵɵreference\"](8);core[\"ɵɵadvance\"](13),core[\"ɵɵproperty\"](\"ngModel\",ctx.barcode),core[\"ɵɵadvance\"](3),core[\"ɵɵproperty\"](\"disabled\",_r0.invalid),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"ngForOf\",ctx.barcodePush)}},directives:[fesm5.n,fesm5.B,fesm5.g,fesm5.c,fesm5.d,fesm5.A,fesm5.k,fesm2015_forms.j,fesm2015_forms.e,fesm2015_forms.f,fesm5.m,fesm5.w,fesm5.j,fesm5.q,fesm5.p,fesm5.J,fesm2015_forms.i,fesm2015_forms.d,fesm2015_forms.g,fesm5.f,common.i,fesm5.r],styles:[\".header[_ngcontent-%COMP%]{padding:20px 0;--background:#3f51b5}.header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff}\"]}),ScanBarcodeJobPage})()}];let scan_barcode_job_module_ScanBarcodeJobPageModule=(()=>{class ScanBarcodeJobPageModule{}return ScanBarcodeJobPageModule.ɵmod=core[\"ɵɵdefineNgModule\"]({type:ScanBarcodeJobPageModule}),ScanBarcodeJobPageModule.ɵinj=core[\"ɵɵdefineInjector\"]({factory:function(t){return new(t||ScanBarcodeJobPageModule)},imports:[[common.b,fesm2015_forms.b,fesm5.C,router.h.forChild(routes)]]}),ScanBarcodeJobPageModule})()}}]);","extractedComments":[]}