{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{XOPx:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"JobConfirmPageModule\",(function(){return job_confirm_module_JobConfirmPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),router=__webpack_require__(\"tyNb\"),fesm5=__webpack_require__(\"c7TG\"),tslib_es6=__webpack_require__(\"mrSG\"),signature_pad=__webpack_require__(\"BSjz\"),ngx=__webpack_require__(\"KqBo\"),rest_api_service=__webpack_require__(\"HSMY\"),core=__webpack_require__(\"fXoL\"),ionic_storage=__webpack_require__(\"e8h1\"),http=__webpack_require__(\"tk/3\"),_ivy_ngcc_=__webpack_require__(\"Zw0B\");function JobConfirmPage_img_24_Template(rf,ctx){if(1&rf&&core[\"ɵɵelement\"](0,\"img\",13),2&rf){const ctx_r0=core[\"ɵɵnextContext\"]();core[\"ɵɵproperty\"](\"src\",ctx_r0.base64Image,core[\"ɵɵsanitizeUrl\"])}}const _c0=function(a0){return{\"drawing-active\":a0}},routes=[{path:\"\",component:(()=>{class JobConfirmPage{constructor(navController,storage,toastCtrl,api,loadingController,camera,route,http,router){this.navController=navController,this.storage=storage,this.toastCtrl=toastCtrl,this.api=api,this.loadingController=loadingController,this.camera=camera,this.route=route,this.http=http,this.router=router,this.signature=\"\",this.isDrawing=!1,this.signaturePadOptions={minWidth:2,canvasWidth:400,canvasHeight:200,backgroundColor:\"#f6fbff\",penColor:\"#666a73\"}}ngOnInit(){}ionViewDidEnter(){this.signaturePad.clear(),this.storage.get(\"savedSignature\").then(data=>{this.signature=data})}drawComplete(){this.isDrawing=!1}drawStart(){this.isDrawing=!0}savePad(){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){this.signature=this.signaturePad.toDataURL(\"png\",80),this.storage.set(\"savedSignature\",this.signature);const loading=yield this.loadingController.create({});this.connote_new_string_url=\"\",this.storage.get(\"keyOfData\").then(val=>{this.objVal=val}),yield loading.present();const formData=new FormData;this.signature&&(this.signature=this.signature.replace(/data/gi,\"\")),this.base64Image&&(this.base64Image=this.base64Image.replace(/data/gi,\"\")),formData.append(\"signature\",this.signature),formData.append(\"barcode\",this.objVal),formData.append(\"comment\",this.comment),formData.append(\"image\",this.base64Image),formData.append(\"booking_id\",this.route.snapshot.paramMap.get(\"id\")),yield this.api.confirmJob(formData,this.route.snapshot.paramMap.get(\"id\"),this.objVal,this.comment).subscribe(res=>{this.sendDetail=res,this.storage.set(\"keyOfData\",\"\"),loading.dismiss(),console.log(res),\"success\"==res.result&&this.router.navigate([\"members/dashboard/job\"])},err=>{console.log(err),loading.dismiss()})}))}clearPad(){this.signaturePad.clear()}AccessCamera(){this.camera.getPicture({targetWidth:512,targetHeight:512,correctOrientation:!0,sourceType:this.camera.PictureSourceType.CAMERA,destinationType:this.camera.DestinationType.DATA_URL}).then(imageData=>{this.base64Image=\"data:image/jpeg;base64,\"+imageData,this.picture=imageData},err=>{console.log(err)})}AccessGallery(){this.camera.getPicture({sourceType:this.camera.PictureSourceType.SAVEDPHOTOALBUM,destinationType:this.camera.DestinationType.DATA_URL}).then(imageData=>{this.base64Image=\"data:image/jpeg;base64,\"+imageData,this.picture=imageData},err=>{console.log(err)})}Upload(){}}return JobConfirmPage.ɵfac=function(t){return new(t||JobConfirmPage)(core[\"ɵɵdirectiveInject\"](fesm5.F),core[\"ɵɵdirectiveInject\"](ionic_storage.b),core[\"ɵɵdirectiveInject\"](fesm5.K),core[\"ɵɵdirectiveInject\"](rest_api_service.a),core[\"ɵɵdirectiveInject\"](fesm5.E),core[\"ɵɵdirectiveInject\"](ngx.a),core[\"ɵɵdirectiveInject\"](router.a),core[\"ɵɵdirectiveInject\"](http.a),core[\"ɵɵdirectiveInject\"](router.f))},JobConfirmPage.ɵcmp=core[\"ɵɵdefineComponent\"]({type:JobConfirmPage,selectors:[[\"app-job-confirm\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core[\"ɵɵviewQuery\"](signature_pad.SignaturePad,!0,!1),2&rf&&core[\"ɵɵqueryRefresh\"](_t=core[\"ɵɵloadQuery\"]())&&(ctx.signaturePad=_t.first)},decls:37,vars:6,consts:[[1,\"header\"],[\"slot\",\"start\"],[\"padding\",\"\",\"no-bounce\",\"\"],[1,\"title\"],[3,\"ngClass\"],[3,\"options\",\"onBeginEvent\",\"onEndEvent\"],[\"color\",\"primary\",3,\"click\"],[\"name\",\"camera\"],[\"name\",\"image\"],[3,\"src\",4,\"ngIf\"],[\"size\",\"12\"],[\"name\",\"comment\",\"type\",\"text\",\"placeholder\",\"หมายเหตุ ชื่อผู้เซนต์รับของ\",3,\"ngModel\",\"ngModelChange\"],[\"color\",\"danger\",3,\"click\"],[3,\"src\"]],template:function(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"ion-header\"),core[\"ɵɵelementStart\"](1,\"ion-toolbar\",0),core[\"ɵɵelementStart\"](2,\"ion-buttons\",1),core[\"ɵɵelement\"](3,\"ion-back-button\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](4,\"ion-title\"),core[\"ɵɵtext\"](5,\"รับสินค้า\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](6,\"ion-content\",2),core[\"ɵɵelementStart\"](7,\"div\",3),core[\"ɵɵtext\"](8,\"ลายเซนต์\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](9,\"ion-row\",4),core[\"ɵɵelement\"](10,\"ion-col\"),core[\"ɵɵelementStart\"](11,\"ion-col\"),core[\"ɵɵelementStart\"](12,\"signature-pad\",5),core[\"ɵɵlistener\"](\"onBeginEvent\",(function(){return ctx.drawStart()}))(\"onEndEvent\",(function(){return ctx.drawComplete()})),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelement\"](13,\"ion-col\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](14,\"ion-row\"),core[\"ɵɵelementStart\"](15,\"ion-col\"),core[\"ɵɵelementStart\"](16,\"ion-button\",6),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.AccessCamera()})),core[\"ɵɵelementStart\"](17,\"ion-icon\",7),core[\"ɵɵtext\"](18,\" Camera\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](19,\"ion-button\",6),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.AccessGallery()})),core[\"ɵɵelementStart\"](20,\"ion-icon\",8),core[\"ɵɵtext\"](21,\" Gallery\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](22,\"ion-row\"),core[\"ɵɵelementStart\"](23,\"ion-col\"),core[\"ɵɵtemplate\"](24,JobConfirmPage_img_24_Template,1,1,\"img\",9),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](25,\"ion-row\"),core[\"ɵɵelementStart\"](26,\"ion-col\",10),core[\"ɵɵelementStart\"](27,\"ion-item\"),core[\"ɵɵelementStart\"](28,\"ion-input\",11),core[\"ɵɵlistener\"](\"ngModelChange\",(function($event){return ctx.comment=$event})),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](29,\"ion-footer\"),core[\"ɵɵelementStart\"](30,\"ion-grid\"),core[\"ɵɵelementStart\"](31,\"ion-row\"),core[\"ɵɵelementStart\"](32,\"ion-col\"),core[\"ɵɵelementStart\"](33,\"ion-button\",12),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.clearPad()})),core[\"ɵɵtext\"](34,\"Clear\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](35,\"ion-button\",6),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.savePad()})),core[\"ɵɵtext\"](36,\"Save\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](9),core[\"ɵɵproperty\"](\"ngClass\",core[\"ɵɵpureFunction1\"](4,_c0,ctx.isDrawing)),core[\"ɵɵadvance\"](3),core[\"ɵɵproperty\"](\"options\",ctx.signaturePadOptions),core[\"ɵɵadvance\"](12),core[\"ɵɵproperty\"](\"ngIf\",ctx.base64Image),core[\"ɵɵadvance\"](4),core[\"ɵɵproperty\"](\"ngModel\",ctx.comment))},directives:[fesm5.n,fesm5.B,fesm5.g,fesm5.c,fesm5.d,fesm5.A,fesm5.k,fesm5.a,fesm5.w,common.h,fesm5.j,_ivy_ngcc_.SignaturePad,fesm5.f,fesm5.o,common.j,fesm5.q,fesm5.p,fesm5.J,fesm2015_forms.d,fesm2015_forms.g,fesm5.l,fesm5.m],styles:[\".drawing-active[_ngcontent-%COMP%]{background:#d6fffc}.title[_ngcontent-%COMP%]{text-align:center;font-weight:700;padding:10px}\"]}),JobConfirmPage})()}];let job_confirm_module_JobConfirmPageModule=(()=>{class JobConfirmPageModule{}return JobConfirmPageModule.ɵmod=core[\"ɵɵdefineNgModule\"]({type:JobConfirmPageModule}),JobConfirmPageModule.ɵinj=core[\"ɵɵdefineInjector\"]({factory:function(t){return new(t||JobConfirmPageModule)},imports:[[common.b,fesm2015_forms.b,fesm5.C,router.h.forChild(routes),_ivy_ngcc_.SignaturePadModule]]}),JobConfirmPageModule})()}}]);","extractedComments":[]}