{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{wbKT:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"JobDetailPageModule\",(function(){return job_detail_module_JobDetailPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),router=__webpack_require__(\"tyNb\"),fesm5=__webpack_require__(\"c7TG\"),tslib_es6=__webpack_require__(\"mrSG\"),rest_api_service=__webpack_require__(\"HSMY\"),ngx=__webpack_require__(\"Wwn5\"),core=__webpack_require__(\"fXoL\"),ionic_storage=__webpack_require__(\"e8h1\");function JobDetailPage_ion_row_31_Template(rf,ctx){if(1&rf){const _r5=core[\"ɵɵgetCurrentView\"]();core[\"ɵɵelementStart\"](0,\"ion-row\"),core[\"ɵɵelementStart\"](1,\"ion-col\",9),core[\"ɵɵelementStart\"](2,\"ion-button\",10),core[\"ɵɵlistener\"](\"click\",(function(){core[\"ɵɵrestoreView\"](_r5);const ctx_r4=core[\"ɵɵnextContext\"]();return ctx_r4.notAccept(ctx_r4.detail.id)})),core[\"ɵɵtext\"](3,\"ไม่รับ\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](4,\"ion-col\",11),core[\"ɵɵelementStart\"](5,\"ion-button\",12),core[\"ɵɵlistener\"](\"click\",(function(){return core[\"ɵɵrestoreView\"](_r5),core[\"ɵɵnextContext\"]().accept()})),core[\"ɵɵtext\"](6,\"รับ\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()}}function JobDetailPage_ion_row_39_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"ion-row\"),core[\"ɵɵelementStart\"](1,\"ion-col\",7),core[\"ɵɵelementStart\"](2,\"ion-button\",13),core[\"ɵɵtext\"](3,\"เพิ่ม/แก้ไข connote\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r1=core[\"ɵɵnextContext\"]();core[\"ɵɵadvance\"](2),core[\"ɵɵpropertyInterpolate1\"](\"routerLink\",\"/members/scan/\",ctx_r1.id_booking,\"\")}}function JobDetailPage_ion_row_40_Template(rf,ctx){if(1&rf){const _r8=core[\"ɵɵgetCurrentView\"]();core[\"ɵɵelementStart\"](0,\"ion-row\"),core[\"ɵɵelementStart\"](1,\"ion-col\",3),core[\"ɵɵelementStart\"](2,\"ion-button\",10),core[\"ɵɵlistener\"](\"click\",(function(){return core[\"ɵɵrestoreView\"](_r8),core[\"ɵɵnextContext\"]().jobCancle()})),core[\"ɵɵtext\"](3,\"ยกเลิก\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](4,\"ion-col\",3),core[\"ɵɵelementStart\"](5,\"ion-button\",12),core[\"ɵɵlistener\"](\"click\",(function(){core[\"ɵɵrestoreView\"](_r8);const ctx_r9=core[\"ɵɵnextContext\"]();return ctx_r9.jobConfirm(ctx_r9.detail.id_booking)})),core[\"ɵɵtext\"](6,\"ยืนยันรับสินค้า\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()}}function JobDetailPage_ion_row_41_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"ion-row\"),core[\"ɵɵelementStart\"](1,\"ion-col\",7),core[\"ɵɵelementStart\"](2,\"ion-button\",14),core[\"ɵɵtext\"](3,\"คลิกที่นี่เพื่อย้อนกลับ\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]())}const routes=[{path:\"\",component:(()=>{class JobDetailPage{constructor(api,loadingController,route,router,callNumber,storage){this.api=api,this.loadingController=loadingController,this.route=route,this.router=router,this.callNumber=callNumber,this.storage=storage,this.detail={}}ngOnInit(){this.getJobDetail()}ionViewWillEnter(){this.getJobDetail()}getJobDetail(){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){this.id_booking=this.route.snapshot.paramMap.get(\"id\");const loading=yield this.loadingController.create({});yield loading.present(),yield this.api.getJobDetailCount(this.route.snapshot.paramMap.get(\"id\")).subscribe(res=>{this.detail=res.data,this.count_connotes=res.connote_count,console.log(this.connotes),loading.dismiss()},err=>{console.log(err),loading.dismiss()}),this.storage.get(\"keyOfData\").then(val=>{\"\"!=val&&this.storage.set(\"keyOfData\",\"\")})}))}callNow(number){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){this.callNumber.callNumber(number,!0).then(res=>console.log(\"Launched dialer!\",res)).catch(err=>console.log(\"Error launching dialer\",err))}))}notAccept(id){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){const loading=yield this.loadingController.create({});yield loading.present(),yield this.api.updateJob(this.route.snapshot.paramMap.get(\"id\"),\"pending\").subscribe(res=>{this.getJobDetail(),loading.dismiss()},err=>{console.log(err),loading.dismiss()})}))}accept(){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){const loading=yield this.loadingController.create({});yield loading.present(),yield this.api.updateJob(this.route.snapshot.paramMap.get(\"id\"),\"inprogress\").subscribe(res=>{this.getJobDetail(),loading.dismiss()},err=>{console.log(err),loading.dismiss()})}))}jobCancle(){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){this.connote_new=[],this.router.navigate([\"members/dashboard/job\"])}))}jobConfirm(id_booking){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){this.router.navigate([\"members/job-confirm/\"+id_booking])}))}listJob(){return Object(tslib_es6.b)(this,void 0,void 0,(function*(){this.router.navigate([\"members/dashboard/job\"])}))}}return JobDetailPage.ɵfac=function(t){return new(t||JobDetailPage)(core[\"ɵɵdirectiveInject\"](rest_api_service.a),core[\"ɵɵdirectiveInject\"](fesm5.E),core[\"ɵɵdirectiveInject\"](router.a),core[\"ɵɵdirectiveInject\"](router.f),core[\"ɵɵdirectiveInject\"](ngx.a),core[\"ɵɵdirectiveInject\"](ionic_storage.b))},JobDetailPage.ɵcmp=core[\"ɵɵdefineComponent\"]({type:JobDetailPage,selectors:[[\"app-job-detail\"]],decls:42,vars:13,consts:[[1,\"header\"],[\"slot\",\"start\"],[\"color\",\"warning\",\"expand\",\"full\",3,\"click\"],[\"size\",\"6\"],[\"button\",\"\",\"icon-start\",\"\",\"ion-button\",\"\",\"full\",\"\",3,\"click\"],[\"name\",\"call\"],[1,\"icon\",\"ion-ios-telephone\"],[\"size\",\"12\"],[4,\"ngIf\"],[\"size\",\"5\"],[\"color\",\"danger\",\"expand\",\"full\",3,\"click\"],[\"size\",\"7\"],[\"color\",\"primary\",\"expand\",\"full\",3,\"click\"],[\"color\",\"dark\",\"expand\",\"full\",3,\"routerLink\"],[\"color\",\"danger\",\"expand\",\"full\",\"routerLink\",\"/members/dashboard/job\"]],template:function(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"ion-header\"),core[\"ɵɵelementStart\"](1,\"ion-toolbar\",0),core[\"ɵɵelementStart\"](2,\"ion-buttons\",1),core[\"ɵɵelementStart\"](3,\"ion-button\",2),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.listJob()})),core[\"ɵɵtext\"](4,\"< กลับ\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](5,\"ion-title\"),core[\"ɵɵtext\"](6),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](7,\"ion-content\"),core[\"ɵɵelementStart\"](8,\"ion-card\"),core[\"ɵɵelementStart\"](9,\"ion-card-content\"),core[\"ɵɵelementStart\"](10,\"ion-grid\"),core[\"ɵɵelementStart\"](11,\"ion-row\"),core[\"ɵɵelementStart\"](12,\"ion-col\",3),core[\"ɵɵelementStart\"](13,\"ion-label\"),core[\"ɵɵtext\"](14),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](15,\"ion-col\",3),core[\"ɵɵelementStart\"](16,\"ion-label\"),core[\"ɵɵelementStart\"](17,\"a\",4),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.callNow(ctx.detail.mobile)})),core[\"ɵɵelement\"](18,\"ion-icon\",5),core[\"ɵɵelement\"](19,\"i\",6),core[\"ɵɵelementStart\"](20,\"strong\"),core[\"ɵɵtext\"](21),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](22,\"ion-col\",7),core[\"ɵɵelementStart\"](23,\"ion-label\"),core[\"ɵɵtext\"](24),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](25,\"ion-col\",7),core[\"ɵɵelementStart\"](26,\"ion-label\"),core[\"ɵɵtext\"](27),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](28,\"ion-col\",7),core[\"ɵɵelementStart\"](29,\"ion-label\"),core[\"ɵɵtext\"](30),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](31,JobDetailPage_ion_row_31_Template,7,0,\"ion-row\",8),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](32,\"ion-card\"),core[\"ɵɵelementStart\"](33,\"ion-card-content\"),core[\"ɵɵelementStart\"](34,\"ion-grid\"),core[\"ɵɵelementStart\"](35,\"ion-row\"),core[\"ɵɵelementStart\"](36,\"ion-col\",7),core[\"ɵɵelementStart\"](37,\"b\"),core[\"ɵɵtext\"](38),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](39,JobDetailPage_ion_row_39_Template,4,1,\"ion-row\",8),core[\"ɵɵtemplate\"](40,JobDetailPage_ion_row_40_Template,7,0,\"ion-row\",8),core[\"ɵɵtemplate\"](41,JobDetailPage_ion_row_41_Template,4,0,\"ion-row\",8),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](6),core[\"ɵɵtextInterpolate1\"](\"รับสินค้า \",ctx.detail.key,\"\"),core[\"ɵɵadvance\"](8),core[\"ɵɵtextInterpolate\"](ctx.detail.person),core[\"ɵɵadvance\"](7),core[\"ɵɵtextInterpolate\"](ctx.detail.mobile),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](ctx.detail.customer_name),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate3\"](\"\",ctx.detail.district,\" \",ctx.detail.province,\" \",ctx.detail.postcode,\"\"),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate1\"](\"เวลารับสินค้า \",ctx.detail.get_datetime,\"\"),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",\"new\"==ctx.detail.status),core[\"ɵɵadvance\"](7),core[\"ɵɵtextInterpolate1\"](\"จำนวน connote ทั้งหมด \",ctx.count_connotes,\" connote\"),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",\"inprogress\"==ctx.detail.status),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",\"inprogress\"==ctx.detail.status),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",\"pending\"==ctx.detail.status))},directives:[fesm5.n,fesm5.B,fesm5.g,fesm5.f,fesm5.A,fesm5.k,fesm5.h,fesm5.i,fesm5.m,fesm5.w,fesm5.j,fesm5.r,fesm5.o,common.j,fesm5.I,router.g],styles:[\".header[_ngcontent-%COMP%]{padding:20px 0;--background:#3f51b5}.header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff}\"]}),JobDetailPage})()}];let job_detail_module_JobDetailPageModule=(()=>{class JobDetailPageModule{}return JobDetailPageModule.ɵmod=core[\"ɵɵdefineNgModule\"]({type:JobDetailPageModule}),JobDetailPageModule.ɵinj=core[\"ɵɵdefineInjector\"]({factory:function(t){return new(t||JobDetailPageModule)},imports:[[common.b,fesm2015_forms.b,fesm5.C,router.h.forChild(routes)]]}),JobDetailPageModule})()}}]);","extractedComments":[]}